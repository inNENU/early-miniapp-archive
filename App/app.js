"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var page_1 = require("./utils/page");
var app_1 = require("./utils/app");
var $App = wxpage_1.default.A;
$App({
    globalData: {
        version: 'V 2.0.2',
        music: { play: false, played: false, index: 0 },
        page: {
            data: [],
            aim: ''
        },
        date: new Date().getTime()
    },
    config: {
        route: ['/page/$page', '/module/$page', '/function/$page', '/settings/$page'],
        resolvePath: function (name) {
            return ['main', 'function', 'guide', 'me'].includes(name)
                ? "/page/" + name
                : ['setting', '2.0', 'about'].includes(name)
                    ? "/settings/" + name
                    : "/module/" + name;
        }
    },
    onLaunch: function (opts) {
        console.info('小程序启动，参数为', opts);
        page_1.default.init(this.globalData);
        if (!wx.getStorageSync('inited'))
            app_1.default.appInit();
        this.globalData.T = wx.getStorageSync('theme');
        this.globalData.nm = app_1.default.nightmode();
        this.globalData.info = wx.getSystemInfoSync();
        console.info('设备信息为', this.globalData.info);
        app_1.default.startup(this.globalData.version);
    },
    onAwake: function (time) {
        console.log('小程序在', time, 'ms之后被唤醒');
        this.logger.debug("\"onAwake after " + time + "ms");
        this.globalData.nm = app_1.default.nightmode();
        app_1.default.noticeCheck(this.globalData.version);
        app_1.default.appUpdate(this.globalData.version);
    },
    onError: function (errorMsg) {
        console.error('出错信息为：', errorMsg);
        this.logger.warn('Error ocurred', errorMsg);
    },
    onPageNotFound: function (msg) {
        wx.switchTab({ url: 'pages/main' });
        console.warn('未找到界面:', msg);
        this.logger.warn('未找到界面', msg);
    },
    logger: wx.getLogManager({ level: 1 })
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaUNBQStCO0FBQy9CLHFDQUFpQztBQUNqQyxtQ0FBOEI7QUFFOUIsSUFBTSxJQUFJLEdBQUcsZ0JBQVMsQ0FBQyxDQUFDLENBQUM7QUFJekIsSUFBSSxDQUFDO0lBQ0gsVUFBVSxFQUFFO1FBQ1YsT0FBTyxFQUFFLFNBQVM7UUFDbEIsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7UUFDL0MsSUFBSSxFQUFFO1lBQ0osSUFBSSxFQUFFLEVBQUU7WUFDUixHQUFHLEVBQUUsRUFBRTtTQUNSO1FBQ0QsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFO0tBRTNCO0lBQ0QsTUFBTSxFQUFFO1FBQ04sS0FBSyxFQUFFLENBQUMsYUFBYSxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQztRQUU3RSxXQUFXLEVBQUUsVUFBQyxJQUFZO1lBQ3hCLE9BQUEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO2dCQUNoRCxDQUFDLENBQUMsV0FBUyxJQUFNO2dCQUNqQixDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7b0JBQzFDLENBQUMsQ0FBQyxlQUFhLElBQU07b0JBQ3JCLENBQUMsQ0FBQyxhQUFXLElBQU07UUFKdkIsQ0FJdUI7S0FDMUI7SUFFRCxRQUFRLFlBQUMsSUFBSTtRQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBT2hDLGNBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRzVCLElBQUksQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQztZQUFFLGFBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUdoRCxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLGFBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUU5QyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTVDLGFBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQ0QsT0FBTyxFQUFQLFVBQVEsSUFBWTtRQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMscUJBQWtCLElBQUksT0FBSSxDQUFDLENBQUM7UUFHOUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsYUFBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRXJDLGFBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxhQUFHLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUlELE9BQU8sWUFBQyxRQUFRO1FBQ2QsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRCxjQUFjLFlBQUMsR0FBRztRQUdoQixFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7UUFFcEMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFHRCxNQUFNLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztDQUN2QyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgd3gqL1xuaW1wb3J0ICRyZWdpc3RlciBmcm9tICd3eHBhZ2UnO1xuaW1wb3J0ICRwYWdlIGZyb20gJy4vdXRpbHMvcGFnZSc7XG5pbXBvcnQgYXBwIGZyb20gJy4vdXRpbHMvYXBwJztcblxuY29uc3QgJEFwcCA9ICRyZWdpc3Rlci5BO1xuXG4vLyBWYXIgd29ya2VyID0gd3guY3JlYXRlV29ya2VyKFwid29ya2VyL3dvcmtlci5qc1wiKSAvL3dvcmtlciB0ZXN0XG5cbiRBcHAoe1xuICBnbG9iYWxEYXRhOiB7XG4gICAgdmVyc2lvbjogJ1YgMi4wLjInLFxuICAgIG11c2ljOiB7IHBsYXk6IGZhbHNlLCBwbGF5ZWQ6IGZhbHNlLCBpbmRleDogMCB9LFxuICAgIHBhZ2U6IHtcbiAgICAgIGRhdGE6IFtdLFxuICAgICAgYWltOiAnJ1xuICAgIH0sXG4gICAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAvLyBULCBubSwgaW5mb+S5n+WcqGdsb2JhbERhdGHkuK1cbiAgfSxcbiAgY29uZmlnOiB7XG4gICAgcm91dGU6IFsnL3BhZ2UvJHBhZ2UnLCAnL21vZHVsZS8kcGFnZScsICcvZnVuY3Rpb24vJHBhZ2UnLCAnL3NldHRpbmdzLyRwYWdlJ10sXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuICAgIHJlc29sdmVQYXRoOiAobmFtZTogc3RyaW5nKSA9PlxuICAgICAgWydtYWluJywgJ2Z1bmN0aW9uJywgJ2d1aWRlJywgJ21lJ10uaW5jbHVkZXMobmFtZSlcbiAgICAgICAgPyBgL3BhZ2UvJHtuYW1lfWBcbiAgICAgICAgOiBbJ3NldHRpbmcnLCAnMi4wJywgJ2Fib3V0J10uaW5jbHVkZXMobmFtZSlcbiAgICAgICAgICA/IGAvc2V0dGluZ3MvJHtuYW1lfWBcbiAgICAgICAgICA6IGAvbW9kdWxlLyR7bmFtZX1gXG4gIH0sXG5cbiAgb25MYXVuY2gob3B0cykge1xuICAgIGNvbnNvbGUuaW5mbygn5bCP56iL5bqP5ZCv5Yqo77yM5Y+C5pWw5Li6Jywgb3B0cyk7IC8vIOiwg+ivlVxuXG4gICAgLy8gQ29uc3QgY2Fwc3VsZSA9IHd4LmdldE1lbnVCdXR0b25Cb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIC8vIENvbnNvbGUubG9nKGNhcHN1bGUpO1xuXG4gICAgLy8g5Li6c2V0cGFnZeW6k+S8oOWFpWdsb2JhbERhdGHmjIfpkohcbiAgICAkcGFnZS5pbml0KHRoaXMuZ2xvYmFsRGF0YSk7XG5cbiAgICAvLyDlpoLmnpzliJ3mrKHlkK/liqjmiafooYzliJ3lp4vljJZcbiAgICBpZiAoIXd4LmdldFN0b3JhZ2VTeW5jKCdpbml0ZWQnKSkgYXBwLmFwcEluaXQoKTtcblxuICAgIC8vIOiOt+WPluS4u+mimOOAgeWknOmXtOaooeW8j+OAgeiuvuWkh+S/oeaBr1xuICAgIHRoaXMuZ2xvYmFsRGF0YS5UID0gd3guZ2V0U3RvcmFnZVN5bmMoJ3RoZW1lJyk7XG4gICAgdGhpcy5nbG9iYWxEYXRhLm5tID0gYXBwLm5pZ2h0bW9kZSgpO1xuICAgIHRoaXMuZ2xvYmFsRGF0YS5pbmZvID0gd3guZ2V0U3lzdGVtSW5mb1N5bmMoKTtcblxuICAgIGNvbnNvbGUuaW5mbygn6K6+5aSH5L+h5oGv5Li6JywgdGhpcy5nbG9iYWxEYXRhLmluZm8pOyAvLyDosIPor5VcblxuICAgIGFwcC5zdGFydHVwKHRoaXMuZ2xvYmFsRGF0YS52ZXJzaW9uKTtcbiAgfSxcbiAgb25Bd2FrZSh0aW1lOiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmxvZygn5bCP56iL5bqP5ZyoJywgdGltZSwgJ21z5LmL5ZCO6KKr5ZSk6YaSJyk7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYFwib25Bd2FrZSBhZnRlciAke3RpbWV9bXNgKTsvLyDosIPor5VcblxuICAgIC8vIOmHjeaWsOW6lOeUqOWknOmXtOaooeW8j+OAgVxuICAgIHRoaXMuZ2xvYmFsRGF0YS5ubSA9IGFwcC5uaWdodG1vZGUoKTtcblxuICAgIGFwcC5ub3RpY2VDaGVjayh0aGlzLmdsb2JhbERhdGEudmVyc2lvbik7XG4gICAgYXBwLmFwcFVwZGF0ZSh0aGlzLmdsb2JhbERhdGEudmVyc2lvbik7XG4gIH0sXG5cbiAgLy8gT25TaG93OiBmdW5jdGlvbiAoKSB7IH0sXG5cbiAgb25FcnJvcihlcnJvck1zZykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+WHuumUmeS/oeaBr+S4uu+8micsIGVycm9yTXNnKTtcbiAgICB0aGlzLmxvZ2dlci53YXJuKCdFcnJvciBvY3VycmVkJywgZXJyb3JNc2cpOyAvLyDosIPor5VcbiAgfSxcbiAgb25QYWdlTm90Rm91bmQobXNnKSB7XG5cbiAgICAvLyDph43lrprlkJHliLDkuLvnlYzpnaJcbiAgICB3eC5zd2l0Y2hUYWIoeyB1cmw6ICdwYWdlcy9tYWluJyB9KTtcblxuICAgIGNvbnNvbGUud2Fybign5pyq5om+5Yiw55WM6Z2iOicsIG1zZyk7XG4gICAgdGhpcy5sb2dnZXIud2Fybign5pyq5om+5Yiw55WM6Z2iJywgbXNnKTsgLy8g6LCD6K+VXG4gIH0sXG5cbiAgLy8g5pel5b+X566h55CG5Zmo5a+56LGhXG4gIGxvZ2dlcjogd3guZ2V0TG9nTWFuYWdlcih7IGxldmVsOiAxIH0pXG59KTtcbiJdfQ==