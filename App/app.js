"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var page_1 = require("./utils/page");
var app_1 = require("./utils/app");
var $App = wxpage_1.default.A;
$App({
    globalData: {
        version: 'V 2.0.2',
        music: { play: false, played: false, index: 0 },
        page: {
            data: [],
            aim: ''
        },
        date: new Date().getTime()
    },
    config: {
        route: ['/page/$page', '/module/$page', '/function/$page', '/settings/$page'],
        resolvePath: function (name) {
            return ['main', 'function', 'guide', 'me'].includes(name)
                ? "/page/" + name
                : ['setting', '2.0', 'about'].includes(name)
                    ? "/settings/" + name
                    : "/module/" + name;
        }
    },
    onLaunch: function (opts) {
        console.info('小程序启动，参数为', opts);
        page_1.default.init(this.globalData);
        if (!wx.getStorageSync('inited'))
            app_1.default.appInit();
        this.globalData.T = wx.getStorageSync('theme');
        this.globalData.nm = app_1.default.nightmode();
        this.globalData.info = wx.getSystemInfoSync();
        console.info('设备信息为', this.globalData.info);
        app_1.default.startup(this.globalData.version);
    },
    onAwake: function (time) {
        console.log('小程序在', time, 'ms之后被唤醒');
        this.logger.debug("\"onAwake after " + time + "ms");
        this.globalData.nm = app_1.default.nightmode();
        app_1.default.noticeCheck(this.globalData.version);
        app_1.default.appUpdate(this.globalData.version);
    },
    onError: function (errorMsg) {
        console.error('出错信息为：', errorMsg);
        this.logger.warn('Error ocurred', errorMsg);
    },
    onPageNotFound: function (msg) {
        wx.switchTab({ url: 'pages/main' });
        console.warn('未找到界面:', msg);
        this.logger.warn('未找到界面', msg);
    },
    logger: wx.getLogManager({ level: 1 })
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBUUEsaUNBQStCO0FBQy9CLHFDQUFpQztBQUNqQyxtQ0FBOEI7QUFFOUIsSUFBTSxJQUFJLEdBQUcsZ0JBQVMsQ0FBQyxDQUFDLENBQUM7QUFJekIsSUFBSSxDQUFDO0lBQ0gsVUFBVSxFQUFFO1FBQ1YsT0FBTyxFQUFFLFNBQVM7UUFDbEIsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7UUFDL0MsSUFBSSxFQUFFO1lBQ0osSUFBSSxFQUFFLEVBQUU7WUFDUixHQUFHLEVBQUUsRUFBRTtTQUNSO1FBQ0QsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFO0tBRTNCO0lBQ0QsTUFBTSxFQUFFO1FBQ04sS0FBSyxFQUFFLENBQUMsYUFBYSxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQztRQUU3RSxXQUFXLEVBQUUsVUFBQyxJQUFZO1lBQ3hCLE9BQUEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO2dCQUNoRCxDQUFDLENBQUMsV0FBUyxJQUFNO2dCQUNqQixDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7b0JBQzFDLENBQUMsQ0FBQyxlQUFhLElBQU07b0JBQ3JCLENBQUMsQ0FBQyxhQUFXLElBQU07UUFKdkIsQ0FJdUI7S0FDMUI7SUFFRCxRQUFRLFlBQUMsSUFBSTtRQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBT2hDLGNBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRzVCLElBQUksQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQztZQUFFLGFBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUdoRCxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLGFBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUU5QyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTVDLGFBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQ0QsT0FBTyxFQUFQLFVBQVEsSUFBWTtRQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMscUJBQWtCLElBQUksT0FBSSxDQUFDLENBQUM7UUFHOUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEdBQUcsYUFBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRXJDLGFBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxhQUFHLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUlELE9BQU8sWUFBQyxRQUFRO1FBQ2QsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDRCxjQUFjLFlBQUMsR0FBRztRQUVoQixFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7UUFFcEMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFHRCxNQUFNLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztDQUN2QyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQEF1dGhvcjogTXIuSG9wZVxuICogQERhdGU6IDIwMTktMDYtMjQgMDk6Mzg6MDJcbiAqIEBMYXN0RWRpdG9yczogTXIuSG9wZVxuICogQExhc3RFZGl0VGltZTogMjAxOS0wNy0wMSAxNzowMjozNVxuICogQERlc2NyaXB0aW9uOiDlsI/nqIvluo/kuLvohJrmnKxcbiAqL1xuXG5pbXBvcnQgJHJlZ2lzdGVyIGZyb20gJ3d4cGFnZSc7XG5pbXBvcnQgJHBhZ2UgZnJvbSAnLi91dGlscy9wYWdlJztcbmltcG9ydCBhcHAgZnJvbSAnLi91dGlscy9hcHAnO1xuXG5jb25zdCAkQXBwID0gJHJlZ2lzdGVyLkE7XG5cbi8vIFZhciB3b3JrZXIgPSB3eC5jcmVhdGVXb3JrZXIoXCJ3b3JrZXIvd29ya2VyLmpzXCIpIC8vd29ya2VyIHRlc3RcblxuJEFwcCh7XG4gIGdsb2JhbERhdGE6IHtcbiAgICB2ZXJzaW9uOiAnViAyLjAuMicsXG4gICAgbXVzaWM6IHsgcGxheTogZmFsc2UsIHBsYXllZDogZmFsc2UsIGluZGV4OiAwIH0sXG4gICAgcGFnZToge1xuICAgICAgZGF0YTogW10sXG4gICAgICBhaW06ICcnXG4gICAgfSxcbiAgICBkYXRlOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgIC8vIFQsIG5tLCBpbmZv5Lmf5ZyoZ2xvYmFsRGF0YeS4rVxuICB9LFxuICBjb25maWc6IHtcbiAgICByb3V0ZTogWycvcGFnZS8kcGFnZScsICcvbW9kdWxlLyRwYWdlJywgJy9mdW5jdGlvbi8kcGFnZScsICcvc2V0dGluZ3MvJHBhZ2UnXSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG4gICAgcmVzb2x2ZVBhdGg6IChuYW1lOiBzdHJpbmcpID0+XG4gICAgICBbJ21haW4nLCAnZnVuY3Rpb24nLCAnZ3VpZGUnLCAnbWUnXS5pbmNsdWRlcyhuYW1lKVxuICAgICAgICA/IGAvcGFnZS8ke25hbWV9YFxuICAgICAgICA6IFsnc2V0dGluZycsICcyLjAnLCAnYWJvdXQnXS5pbmNsdWRlcyhuYW1lKVxuICAgICAgICAgID8gYC9zZXR0aW5ncy8ke25hbWV9YFxuICAgICAgICAgIDogYC9tb2R1bGUvJHtuYW1lfWBcbiAgfSxcblxuICBvbkxhdW5jaChvcHRzKSB7XG4gICAgY29uc29sZS5pbmZvKCflsI/nqIvluo/lkK/liqjvvIzlj4LmlbDkuLonLCBvcHRzKTsgLy8g6LCD6K+VXG5cbiAgICAvLyBDb25zdCBjYXBzdWxlID0gd3guZ2V0TWVudUJ1dHRvbkJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gQ29uc29sZS5sb2coY2Fwc3VsZSk7XG5cbiAgICAvLyDkuLpzZXRwYWdl5bqT5Lyg5YWlZ2xvYmFsRGF0YeaMh+mSiFxuICAgICRwYWdlLmluaXQodGhpcy5nbG9iYWxEYXRhKTtcblxuICAgIC8vIOWmguaenOWIneasoeWQr+WKqOaJp+ihjOWIneWni+WMllxuICAgIGlmICghd3guZ2V0U3RvcmFnZVN5bmMoJ2luaXRlZCcpKSBhcHAuYXBwSW5pdCgpO1xuXG4gICAgLy8g6I635Y+W5Li76aKY44CB5aSc6Ze05qih5byP44CB6K6+5aSH5L+h5oGvXG4gICAgdGhpcy5nbG9iYWxEYXRhLlQgPSB3eC5nZXRTdG9yYWdlU3luYygndGhlbWUnKTtcbiAgICB0aGlzLmdsb2JhbERhdGEubm0gPSBhcHAubmlnaHRtb2RlKCk7XG4gICAgdGhpcy5nbG9iYWxEYXRhLmluZm8gPSB3eC5nZXRTeXN0ZW1JbmZvU3luYygpO1xuXG4gICAgY29uc29sZS5pbmZvKCforr7lpIfkv6Hmga/kuLonLCB0aGlzLmdsb2JhbERhdGEuaW5mbyk7IC8vIOiwg+ivlVxuXG4gICAgYXBwLnN0YXJ0dXAodGhpcy5nbG9iYWxEYXRhLnZlcnNpb24pO1xuICB9LFxuICBvbkF3YWtlKHRpbWU6IG51bWJlcikge1xuICAgIGNvbnNvbGUubG9nKCflsI/nqIvluo/lnKgnLCB0aW1lLCAnbXPkuYvlkI7ooqvllKTphpInKTtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgXCJvbkF3YWtlIGFmdGVyICR7dGltZX1tc2ApOy8vIOiwg+ivlVxuXG4gICAgLy8g6YeN5paw5bqU55So5aSc6Ze05qih5byP44CBXG4gICAgdGhpcy5nbG9iYWxEYXRhLm5tID0gYXBwLm5pZ2h0bW9kZSgpO1xuXG4gICAgYXBwLm5vdGljZUNoZWNrKHRoaXMuZ2xvYmFsRGF0YS52ZXJzaW9uKTtcbiAgICBhcHAuYXBwVXBkYXRlKHRoaXMuZ2xvYmFsRGF0YS52ZXJzaW9uKTtcbiAgfSxcblxuICAvLyBPblNob3c6IGZ1bmN0aW9uICgpIHsgfSxcblxuICBvbkVycm9yKGVycm9yTXNnKSB7XG4gICAgY29uc29sZS5lcnJvcign5Ye66ZSZ5L+h5oGv5Li677yaJywgZXJyb3JNc2cpO1xuICAgIHRoaXMubG9nZ2VyLndhcm4oJ0Vycm9yIG9jdXJyZWQnLCBlcnJvck1zZyk7IC8vIOiwg+ivlVxuICB9LFxuICBvblBhZ2VOb3RGb3VuZChtc2cpIHtcbiAgICAvLyDph43lrprlkJHliLDkuLvnlYzpnaJcbiAgICB3eC5zd2l0Y2hUYWIoeyB1cmw6ICdwYWdlcy9tYWluJyB9KTtcblxuICAgIGNvbnNvbGUud2Fybign5pyq5om+5Yiw55WM6Z2iOicsIG1zZyk7XG4gICAgdGhpcy5sb2dnZXIud2Fybign5pyq5om+5Yiw55WM6Z2iJywgbXNnKTsgLy8g6LCD6K+VXG4gIH0sXG5cbiAgLy8g5pel5b+X566h55CG5Zmo5a+56LGhXG4gIGxvZ2dlcjogd3guZ2V0TG9nTWFuYWdlcih7IGxldmVsOiAxIH0pXG59KTtcbiJdfQ==