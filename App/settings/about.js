"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var component_1 = require("../utils/component");
var file_1 = require("../utils/file");
var page_1 = require("../utils/page");
var wx_1 = require("../utils/wx");
var a = getApp().globalData;
wxpage_1.default('about', {
    clickNumber: 0,
    data: {
        T: a.T,
        nm: a.nm,
        page: [
            { tag: 'head', title: '关于', aimDepth: 1, grey: true, feedback: true, contact: true },
            {
                tag: 'list',
                head: '版本号',
                content: [
                    { text: a.version, button: 'debugMode' },
                    { text: '启用测试功能', swiKey: 'test', Switch: 'testSwitch' },
                    { text: '调试开关', swiKey: 'debugMode', Switch: 'debugSwitch' },
                    { text: '清除小程序数据', button: 'deleteData' },
                    { text: '清除小程序文件', button: 'deleteFile' },
                    { text: '初始化小程序', button: 'resetApp' },
                    { text: '退出小程序', navigate: true, openType: 'exit', target: 'miniProgram' },
                    { text: '退出开发者模式', button: 'debugMode' }
                ]
            },
            {
                tag: 'list',
                head: '正式版开发日志',
                content: [
                    { text: a.version + "\n\u91CD\u6784\u5C0F\u7A0B\u5E8F\n\u66F4\u65B0\u7F16\u8BD1\u57FA\u7840\u5E93\u4E3A2.7.2\n\u5C0F\u7A0B\u5E8F\u73B0\u5728\u62E5\u6709\u66F4\u597D\u7684\u6027\u80FD" },
                    { text: '查看详细日志', url: '/settings/2.0' }
                ]
            },
            {
                tag: 'list',
                head: '工作室与开发者介绍',
                content: [
                    { text: '   小程序全部内容均由Hope Studio独立开发。' },
                    { text: 'Hope Studio介绍', aim: 'MrHope0' },
                    { text: 'Mr.Hope个人介绍', aim: 'MrHope1' },
                    { text: '   感谢陈旭、董雨馨、傅阳、林传舜、沈竞泽、苏炀、邱诗懿、王一竹、张霁月在界面编写、排版与订正上给予的无私帮助。' }
                ]
            },
            {
                tag: 'list',
                head: '遇到问题？',
                content: [
                    { text: '对小程序有任何意见、建议或是想汇报bug？\n请添加QQ 1178522294 或点击右下角来联系开发者。' },
                    { text: '小程序功能太少?', aim: 'MrHope2' },
                    { text: '小程序响应慢？', desc: '欢迎捐赠', url: '/settings/donate' }
                ]
            },
            { tag: 'foot', desc: "\u5F53\u524D\u7248\u672C\uFF1A" + a.version }
        ]
    },
    onNavigate: function (res) {
        var p = this.data.page;
        var value = wx.getStorageSync('developMode');
        this.developMode = value || value === false ? value : wx.setStorageSync('developMode', false);
        if (wx.getStorageSync('debugMode'))
            p[1].content[2].status = true;
        if (!this.developMode)
            p[1].content.forEach(function (x, y) {
                x.hidden = !(y === 0);
            });
        page_1.default.resolve(res, p);
    },
    onLoad: function (option) {
        if (option && a.page.aim === option.aim)
            page_1.default.Set({ option: { aim: 'about' }, ctx: this });
        else {
            var p = this.data.page;
            var value = wx.getStorageSync('developMode');
            this.developMode = value || value === false ? value : wx.setStorageSync('developMode', false);
            if (!this.developMode)
                p[1].content.forEach(function (x, y) {
                    x.hidden = !(y === 0);
                });
            page_1.default.Set({ option: { aim: 'about' }, ctx: this }, p);
        }
        page_1.default.Notice('about');
    },
    onShow: function () {
        var _a = page_1.default.color(this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
        wx.setNavigationBarColor(nc);
        wx.setBackgroundColor(bc);
    },
    onReady: function () {
        var _this = this;
        wx_1.default.request("config/" + a.version + "/about", function (data) {
            page_1.default.Set({ option: { aim: 'about' }, ctx: _this }, _this.data.page.slice(0, 2).concat(data, _this.data.page.slice(-1)));
        });
    },
    onPageScroll: function (e) {
        component_1.default.nav(e, this);
    },
    cA: function (e) {
        component_1.default.trigger(e, this);
    },
    debugMode: function () {
        var _this = this;
        if (this.developMode) {
            wx.setStorageSync('developMode', false);
            this.data.page[1].content.forEach(function (x, y) {
                x.hidden = !(y === 0);
            });
            this.setData({ page: this.data.page });
            this.clickNumber = 0;
            this.developMode = false;
        }
        else if (this.clickNumber < 5)
            this.clickNumber += 1;
        else if (this.clickNumber < 10) {
            wx_1.default.tip("\u518D\u70B9\u51FB" + (10 - this.clickNumber) + "\u6B21\u5373\u53EF\u542F\u7528\u5F00\u53D1\u8005\u6A21\u5F0F");
            this.clickNumber += 1;
        }
        else {
            this.setData({ debug: true });
            wx.nextTick(function () {
                _this.setData({ focus: true });
            });
        }
    },
    password: function (e) {
        if (e.detail.value.length === 7) {
            if (e.detail.value === '5201314') {
                wx_1.default.tip('已启用开发者模式');
                this.data.page[1].content.forEach(function (x) {
                    x.hidden = false;
                });
                this.setData({ page: this.data.page, debug: false });
                wx.setStorageSync('developMode', true);
                this.developMode = true;
            }
            else {
                wx.showToast({ title: '密码错误', icon: 'none', duration: 1000, image: '/icon/close.png' });
                this.setData({ debug: false });
            }
            e.detail.value = '';
        }
        return e.detail.value;
    },
    cancelInput: function () {
        this.setData({ debug: false });
    },
    debugSwitch: function (e) {
        var pos = e.target.dataset.id.split('-');
        this.data.page[pos[0]].content[pos[1]].status = e.detail.value;
        this.setData({ page: this.data.page });
        wx.setStorageSync('debugMode', e.detail.value);
        if (e.detail.value)
            wx.setEnableDebug({ enableDebug: true });
        else
            wx.setEnableDebug({ enableDebug: false });
    },
    testSwitch: function (res) {
        component_1.default.trigger(res, this);
        wx_1.default.tip("\u5DF2" + (res.detail.value ? '启用' : '关闭') + "\u6D4B\u8BD5\u529F\u80FD");
    },
    deleteData: function () {
        wx.clearStorageSync();
        wx_1.default.tip('数据清除完成');
    },
    deleteFile: function () {
        wx.showLoading({ title: '删除中', mask: true });
        file_1.default.listFile('').forEach(function (filePath) {
            file_1.default.Delete(filePath);
        });
        wx.hideLoading();
    },
    resetApp: function () {
        wx.showLoading({ title: '初始化中', mask: true });
        file_1.default.listFile('').forEach(function (filePath) {
            file_1.default.Delete(filePath);
        });
        wx.clearStorageSync();
        wx.hideLoading();
        wx.showModal({ title: '小程序初始化完成', content: '请单击 “退出小程序按钮” 退出小程序', showCancel: false });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJvdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhYm91dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLGlDQUEyQztBQUMzQyxnREFBNEM7QUFDNUMsc0NBQWtDO0FBQ2xDLHNDQUFrQztBQUNsQyxrQ0FBOEI7QUFDdEIsSUFBQSx1QkFBYSxDQUFjO0FBRW5DLGdCQUFTLENBQUMsT0FBTyxFQUFFO0lBQ2pCLFdBQVcsRUFBRSxDQUFDO0lBQ2QsSUFBSSxFQUFFO1FBQ0osQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ04sRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFO1FBQ1IsSUFBSSxFQUFFO1lBQ0osRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtZQUNwRjtnQkFDRSxHQUFHLEVBQUUsTUFBTTtnQkFDWCxJQUFJLEVBQUUsS0FBSztnQkFDWCxPQUFPLEVBQUU7b0JBQ1AsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFO29CQUN4QyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFO29CQUN4RCxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFO29CQUM1RCxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRTtvQkFDekMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUU7b0JBQ3pDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFO29CQUN0QyxFQUFFLElBQUksRUFBRSxPQUFP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b3I6IE1yLkhvcGVcclxuICogQERhdGU6IDIwMTktMDYtMjQgMjA6NTI6MzZcclxuICogQExhc3RFZGl0b3JzOiBNci5Ib3BlXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMDYtMjYgMDA6MDg6NTZcclxuICogQERlc2NyaXB0aW9uOiDlhbPkuo5cclxuICovXHJcbmltcG9ydCAkcmVnaXN0ZXIsIHsgV1hQYWdlIH0gZnJvbSAnd3hwYWdlJztcclxuaW1wb3J0ICRjb21wb25lbnQgZnJvbSAnLi4vdXRpbHMvY29tcG9uZW50JztcclxuaW1wb3J0ICRmaWxlIGZyb20gJy4uL3V0aWxzL2ZpbGUnO1xyXG5pbXBvcnQgJHBhZ2UgZnJvbSAnLi4vdXRpbHMvcGFnZSc7XHJcbmltcG9ydCAkbXkgZnJvbSAnLi4vdXRpbHMvd3gnO1xyXG5jb25zdCB7IGdsb2JhbERhdGE6IGEgfSA9IGdldEFwcCgpO1xyXG5cclxuJHJlZ2lzdGVyKCdhYm91dCcsIHtcclxuICBjbGlja051bWJlcjogMCxcclxuICBkYXRhOiB7XHJcbiAgICBUOiBhLlQsXHJcbiAgICBubTogYS5ubSxcclxuICAgIHBhZ2U6IFtcclxuICAgICAgeyB0YWc6ICdoZWFkJywgdGl0bGU6ICflhbPkuo4nLCBhaW1EZXB0aDogMSwgZ3JleTogdHJ1ZSwgZmVlZGJhY2s6IHRydWUsIGNvbnRhY3Q6IHRydWUgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRhZzogJ2xpc3QnLFxyXG4gICAgICAgIGhlYWQ6ICfniYjmnKzlj7cnLFxyXG4gICAgICAgIGNvbnRlbnQ6IFtcclxuICAgICAgICAgIHsgdGV4dDogYS52ZXJzaW9uLCBidXR0b246ICdkZWJ1Z01vZGUnIH0sXHJcbiAgICAgICAgICB7IHRleHQ6ICflkK/nlKjmtYvor5Xlip/og70nLCBzd2lLZXk6ICd0ZXN0JywgU3dpdGNoOiAndGVzdFN3aXRjaCcgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+iwg+ivleW8gOWFsycsIHN3aUtleTogJ2RlYnVnTW9kZScsIFN3aXRjaDogJ2RlYnVnU3dpdGNoJyB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAn5riF6Zmk5bCP56iL5bqP5pWw5o2uJywgYnV0dG9uOiAnZGVsZXRlRGF0YScgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+a4hemZpOWwj+eoi+W6j+aWh+S7ticsIGJ1dHRvbjogJ2RlbGV0ZUZpbGUnIH0sXHJcbiAgICAgICAgICB7IHRleHQ6ICfliJ3lp4vljJblsI/nqIvluo8nLCBidXR0b246ICdyZXNldEFwcCcgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+mAgOWHuuWwj+eoi+W6jycsIG5hdmlnYXRlOiB0cnVlLCBvcGVuVHlwZTogJ2V4aXQnLCB0YXJnZXQ6ICdtaW5pUHJvZ3JhbScgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+mAgOWHuuW8gOWPkeiAheaooeW8jycsIGJ1dHRvbjogJ2RlYnVnTW9kZScgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRhZzogJ2xpc3QnLFxyXG4gICAgICAgIGhlYWQ6ICfmraPlvI/niYjlvIDlj5Hml6Xlv5cnLFxyXG4gICAgICAgIGNvbnRlbnQ6IFtcclxuICAgICAgICAgIHsgdGV4dDogYCR7YS52ZXJzaW9ufVxcbumHjeaehOWwj+eoi+W6j1xcbuabtOaWsOe8luivkeWfuuehgOW6k+S4ujIuNy4yXFxu5bCP56iL5bqP546w5Zyo5oul5pyJ5pu05aW955qE5oCn6IO9YCB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAn5p+l55yL6K+m57uG5pel5b+XJywgdXJsOiAnL3NldHRpbmdzLzIuMCcgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRhZzogJ2xpc3QnLFxyXG4gICAgICAgIGhlYWQ6ICflt6XkvZzlrqTkuI7lvIDlj5HogIXku4vnu40nLFxyXG4gICAgICAgIGNvbnRlbnQ6IFtcclxuICAgICAgICAgIHsgdGV4dDogJyAgIOWwj+eoi+W6j+WFqOmDqOWGheWuueWdh+eUsUhvcGUgU3R1ZGlv54us56uL5byA5Y+R44CCJyB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAnSG9wZSBTdHVkaW/ku4vnu40nLCBhaW06ICdNckhvcGUwJyB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAnTXIuSG9wZeS4quS6uuS7i+e7jScsIGFpbTogJ01ySG9wZTEnIH0sXHJcbiAgICAgICAgICB7IHRleHQ6ICcgICDmhJ/osKLpmYjml63jgIHokaPpm6jppqjjgIHlgoXpmLPjgIHmnpfkvKDoiJzjgIHmsojnq57ms73jgIHoi4/ngoDjgIHpgrHor5fmh7/jgIHnjovkuIDnq7njgIHlvKDpnIHmnIjlnKjnlYzpnaLnvJblhpnjgIHmjpLniYjkuI7orqLmraPkuIrnu5nkuojnmoTml6Dnp4HluK7liqnjgIInIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0YWc6ICdsaXN0JyxcclxuICAgICAgICBoZWFkOiAn6YGH5Yiw6Zeu6aKY77yfJyxcclxuICAgICAgICBjb250ZW50OiBbXHJcbiAgICAgICAgICB7IHRleHQ6ICflr7nlsI/nqIvluo/mnInku7vkvZXmhI/op4HjgIHlu7rorq7miJbmmK/mg7PmsYfmiqVidWfvvJ9cXG7or7fmt7vliqBRUSAxMTc4NTIyMjk0IOaIlueCueWHu+WPs+S4i+inkuadpeiBlOezu+W8gOWPkeiAheOAgicgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+Wwj+eoi+W6j+WKn+iDveWkquWwkT8nLCBhaW06ICdNckhvcGUyJyB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAn5bCP56iL5bqP5ZON5bqU5oWi77yfJywgZGVzYzogJ+asoui/juaNkOi1oCcsIHVybDogJy9zZXR0aW5ncy9kb25hdGUnIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgdGFnOiAnZm9vdCcsIGRlc2M6IGDlvZPliY3niYjmnKzvvJoke2EudmVyc2lvbn1gIH1cclxuICAgIF1cclxuICB9LFxyXG4gIG9uTmF2aWdhdGUocmVzOiBXWFBhZ2UuUGFnZUFyZykge1xyXG4gICAgY29uc3QgcCA9IHRoaXMuZGF0YS5wYWdlO1xyXG4gICAgY29uc3QgdmFsdWUgPSB3eC5nZXRTdG9yYWdlU3luYygnZGV2ZWxvcE1vZGUnKTtcclxuXHJcbiAgICB0aGlzLmRldmVsb3BNb2RlID0gdmFsdWUgfHwgdmFsdWUgPT09IGZhbHNlID8gdmFsdWUgOiB3eC5zZXRTdG9yYWdlU3luYygnZGV2ZWxvcE1vZGUnLCBmYWxzZSk7XHJcbiAgICBpZiAod3guZ2V0U3RvcmFnZVN5bmMoJ2RlYnVnTW9kZScpKSBwWzFdLmNvbnRlbnRbMl0uc3RhdHVzID0gdHJ1ZTtcclxuICAgIGlmICghdGhpcy5kZXZlbG9wTW9kZSkgcFsxXS5jb250ZW50LmZvckVhY2goKHg6IGFueSwgeTogbnVtYmVyKSA9PiB7XHJcbiAgICAgIHguaGlkZGVuID0gISh5ID09PSAwKTtcclxuICAgIH0pO1xyXG4gICAgJHBhZ2UucmVzb2x2ZShyZXMsIHApO1xyXG4gIH0sXHJcbiAgb25Mb2FkKG9wdGlvbikge1xyXG4gICAgaWYgKG9wdGlvbiAmJiBhLnBhZ2UuYWltID09PSBvcHRpb24uYWltKSAkcGFnZS5TZXQoeyBvcHRpb246IHsgYWltOiAnYWJvdXQnIH0sIGN0eDogdGhpcyB9KTtcclxuICAgIGVsc2Uge1xyXG4gICAgICBjb25zdCBwID0gdGhpcy5kYXRhLnBhZ2U7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ2RldmVsb3BNb2RlJyk7XHJcblxyXG4gICAgICB0aGlzLmRldmVsb3BNb2RlID0gdmFsdWUgfHwgdmFsdWUgPT09IGZhbHNlID8gdmFsdWUgOiB3eC5zZXRTdG9yYWdlU3luYygnZGV2ZWxvcE1vZGUnLCBmYWxzZSk7XHJcbiAgICAgIGlmICghdGhpcy5kZXZlbG9wTW9kZSkgcFsxXS5jb250ZW50LmZvckVhY2goKHg6IGFueSwgeTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgeC5oaWRkZW4gPSAhKHkgPT09IDApO1xyXG4gICAgICB9KTtcclxuICAgICAgJHBhZ2UuU2V0KHsgb3B0aW9uOiB7IGFpbTogJ2Fib3V0JyB9LCBjdHg6IHRoaXMgfSwgcCk7XHJcbiAgICB9XHJcblxyXG4gICAgJHBhZ2UuTm90aWNlKCdhYm91dCcpO1xyXG4gIH0sXHJcbiAgb25TaG93KCkge1xyXG4gICAgLy8g6K6+572u6IO25ZuK5ZKM6IOM5pmv6aKc6ImyXHJcbiAgICBjb25zdCB7IG5jLCBiYyB9ID0gJHBhZ2UuY29sb3IodGhpcy5kYXRhLnBhZ2VbMF0uZ3JleSk7XHJcblxyXG4gICAgd3guc2V0TmF2aWdhdGlvbkJhckNvbG9yKG5jKTtcclxuICAgIHd4LnNldEJhY2tncm91bmRDb2xvcihiYyk7XHJcbiAgfSxcclxuICBvblJlYWR5KCkge1xyXG4gICAgJG15LnJlcXVlc3QoYGNvbmZpZy8ke2EudmVyc2lvbn0vYWJvdXRgLCAoZGF0YTogb2JqZWN0KSA9PiB7XHJcbiAgICAgICRwYWdlLlNldChcclxuICAgICAgICB7IG9wdGlvbjogeyBhaW06ICdhYm91dCcgfSwgY3R4OiB0aGlzIH0sXHJcbiAgICAgICAgdGhpcy5kYXRhLnBhZ2Uuc2xpY2UoMCwgMikuY29uY2F0KGRhdGEsIHRoaXMuZGF0YS5wYWdlLnNsaWNlKC0xKSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICB9LFxyXG4gIG9uUGFnZVNjcm9sbChlKSB7XHJcbiAgICAkY29tcG9uZW50Lm5hdihlLCB0aGlzKTtcclxuICB9LFxyXG4gIGNBKGU6IGFueSkge1xyXG4gICAgJGNvbXBvbmVudC50cmlnZ2VyKGUsIHRoaXMpO1xyXG4gIH0sXHJcbiAgZGVidWdNb2RlKCkge1xyXG4gICAgaWYgKHRoaXMuZGV2ZWxvcE1vZGUpIHtcclxuICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ2RldmVsb3BNb2RlJywgZmFsc2UpO1xyXG4gICAgICB0aGlzLmRhdGEucGFnZVsxXS5jb250ZW50LmZvckVhY2goKHg6IGFueSwgeTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgeC5oaWRkZW4gPSAhKHkgPT09IDApO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2U6IHRoaXMuZGF0YS5wYWdlIH0pO1xyXG4gICAgICB0aGlzLmNsaWNrTnVtYmVyID0gMDtcclxuICAgICAgdGhpcy5kZXZlbG9wTW9kZSA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNsaWNrTnVtYmVyIDwgNSkgdGhpcy5jbGlja051bWJlciArPSAxO1xyXG4gICAgZWxzZSBpZiAodGhpcy5jbGlja051bWJlciA8IDEwKSB7XHJcbiAgICAgICRteS50aXAoYOWGjeeCueWHuyR7MTAgLSB0aGlzLmNsaWNrTnVtYmVyfeasoeWNs+WPr+WQr+eUqOW8gOWPkeiAheaooeW8j2ApO1xyXG4gICAgICB0aGlzLmNsaWNrTnVtYmVyICs9IDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgZGVidWc6IHRydWUgfSk7XHJcbiAgICAgIHd4Lm5leHRUaWNrKCgpID0+IHtcclxuICAgICAgICB0aGlzLnNldERhdGEhKHsgZm9jdXM6IHRydWUgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGFzc3dvcmQoZTogYW55KSB7XHJcbiAgICBpZiAoZS5kZXRhaWwudmFsdWUubGVuZ3RoID09PSA3KSB7XHJcbiAgICAgIGlmIChlLmRldGFpbC52YWx1ZSA9PT0gJzUyMDEzMTQnKSB7IC8vIOWvhueggeato+ehrlxyXG4gICAgICAgICRteS50aXAoJ+W3suWQr+eUqOW8gOWPkeiAheaooeW8jycpO1xyXG4gICAgICAgIHRoaXMuZGF0YS5wYWdlWzFdLmNvbnRlbnQuZm9yRWFjaCgoeDogYW55KSA9PiB7XHJcbiAgICAgICAgICB4LmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSEoeyBwYWdlOiB0aGlzLmRhdGEucGFnZSwgZGVidWc6IGZhbHNlIH0pO1xyXG4gICAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCdkZXZlbG9wTW9kZScsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuZGV2ZWxvcE1vZGUgPSB0cnVlO1xyXG5cclxuICAgICAgfSBlbHNlIHsgLy8g5a+G56CB6ZSZ6K+vXHJcbiAgICAgICAgd3guc2hvd1RvYXN0KHsgdGl0bGU6ICflr4bnoIHplJnor68nLCBpY29uOiAnbm9uZScsIGR1cmF0aW9uOiAxMDAwLCBpbWFnZTogJy9pY29uL2Nsb3NlLnBuZycgfSk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhISh7IGRlYnVnOiBmYWxzZSB9KTtcclxuICAgICAgfVxyXG4gICAgICBlLmRldGFpbC52YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBlLmRldGFpbC52YWx1ZTtcclxuICB9LFxyXG4gIGNhbmNlbElucHV0KCkge1xyXG4gICAgdGhpcy5zZXREYXRhISh7IGRlYnVnOiBmYWxzZSB9KTtcclxuICB9LFxyXG4gIGRlYnVnU3dpdGNoKGU6IGFueSkge1xyXG4gICAgY29uc3QgcG9zID0gZS50YXJnZXQuZGF0YXNldC5pZC5zcGxpdCgnLScpO1xyXG5cclxuICAgIHRoaXMuZGF0YS5wYWdlW3Bvc1swXV0uY29udGVudFtwb3NbMV1dLnN0YXR1cyA9IGUuZGV0YWlsLnZhbHVlO1xyXG4gICAgdGhpcy5zZXREYXRhISh7IHBhZ2U6IHRoaXMuZGF0YS5wYWdlIH0pO1xyXG4gICAgd3guc2V0U3RvcmFnZVN5bmMoJ2RlYnVnTW9kZScsIGUuZGV0YWlsLnZhbHVlKTtcclxuICAgIGlmIChlLmRldGFpbC52YWx1ZSkgd3guc2V0RW5hYmxlRGVidWcoeyBlbmFibGVEZWJ1ZzogdHJ1ZSB9KTtcclxuICAgIGVsc2Ugd3guc2V0RW5hYmxlRGVidWcoeyBlbmFibGVEZWJ1ZzogZmFsc2UgfSk7XHJcbiAgfSxcclxuICB0ZXN0U3dpdGNoKHJlczogYW55KSB7XHJcbiAgICAkY29tcG9uZW50LnRyaWdnZXIocmVzLCB0aGlzKTtcclxuICAgICRteS50aXAoYOW3siR7cmVzLmRldGFpbC52YWx1ZSA/ICflkK/nlKgnIDogJ+WFs+mXrSd95rWL6K+V5Yqf6IO9YCk7XHJcbiAgfSxcclxuICBkZWxldGVEYXRhKCkge1xyXG4gICAgd3guY2xlYXJTdG9yYWdlU3luYygpO1xyXG4gICAgJG15LnRpcCgn5pWw5o2u5riF6Zmk5a6M5oiQJyk7XHJcbiAgfSxcclxuICBkZWxldGVGaWxlKCkge1xyXG4gICAgd3guc2hvd0xvYWRpbmcoeyB0aXRsZTogJ+WIoOmZpOS4rScsIG1hc2s6IHRydWUgfSk7XHJcblxyXG4gICAgJGZpbGUubGlzdEZpbGUoJycpLmZvckVhY2goKGZpbGVQYXRoOiBzdHJpbmcpID0+IHtcclxuICAgICAgJGZpbGUuRGVsZXRlKGZpbGVQYXRoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHd4LmhpZGVMb2FkaW5nKCk7XHJcbiAgfSxcclxuICByZXNldEFwcCgpIHtcclxuICAgIC8vIOaYvuekuuaPkOekulxyXG4gICAgd3guc2hvd0xvYWRpbmcoeyB0aXRsZTogJ+WIneWni+WMluS4rScsIG1hc2s6IHRydWUgfSk7XHJcblxyXG4gICAgLy8g5riF6Zmk5paH5Lu257O757uf5paH5Lu25LiO5pWw5o2u5a2Y5YKoXHJcbiAgICAkZmlsZS5saXN0RmlsZSgnJykuZm9yRWFjaCgoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xyXG4gICAgICAkZmlsZS5EZWxldGUoZmlsZVBhdGgpO1xyXG4gICAgfSk7XHJcbiAgICB3eC5jbGVhclN0b3JhZ2VTeW5jKCk7XHJcblxyXG4gICAgLy8g6ZqQ6JeP5o+Q56S6XHJcbiAgICB3eC5oaWRlTG9hZGluZygpO1xyXG4gICAgLy8g5o+Q56S655So5oi36YeN5ZCvXHJcbiAgICB3eC5zaG93TW9kYWwoeyB0aXRsZTogJ+Wwj+eoi+W6j+WIneWni+WMluWujOaIkCcsIGNvbnRlbnQ6ICfor7fljZXlh7sg4oCc6YCA5Ye65bCP56iL5bqP5oyJ6ZKu4oCdIOmAgOWHuuWwj+eoi+W6jycsIHNob3dDYW5jZWw6IGZhbHNlIH0pO1xyXG4gIH1cclxufSk7XHJcbiJdfQ==