"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var component_1 = require("../utils/component");
var page_1 = require("../utils/page");
var tab_1 = require("../utils/tab");
var app_1 = require("../utils/app");
var a = getApp().globalData;
var time = [[], []];
wxpage_1.default('setting', {
    data: {
        T: a.T,
        nm: a.nm,
        page: [
            { tag: 'head', title: '设置', grey: true },
            {
                tag: 'list', head: '主题设置', foot: '目前iOS主题可以完美显示',
                content: [
                    {
                        text: '主题设置', key: 'themeNum', single: true, pickerValue: ['iOS', 'Android'], picker: 'setTheme'
                    }
                ]
            },
            {
                tag: 'list',
                head: '夜间模式',
                foot: '启用后，将采用暗色背景与亮色文字，在保持暗光下显示效果的同时保护眼睛。',
                content: [{ text: '夜间模式', Switch: 'switchnm', swiKey: 'nightmode' }]
            },
            {
                tag: 'list',
                foot: '亮度数据为百分比',
                content: [
                    { text: '设定时间', Switch: 'switchnmAC', swiKey: 'nightmodeAutoChange' },
                    { text: '开始时间', inlay: true, key: 'nightmodeStartTime', pickerValue: time },
                    { text: '结束时间', inlay: true, key: 'nightmodeEndTime', pickerValue: time },
                    { text: '日间亮度调整开关', Switch: 'dayBrightnessSwitchHandler', swiKey: 'dayBrightnessChange' },
                    { text: '日间模式亮度', slider: 'dayBrightnessHandler', min: 0, max: 100, sliKey: 'dayBrightness' },
                    { text: '夜间亮度调整开关', Switch: 'nightBrightnessSwitchHandler', swiKey: 'nightBrightnessChange' },
                    { text: '夜间模式亮度', slider: 'nightBrightnessHandler', min: 0, max: 100, sliKey: 'nightBrightness' }
                ]
            },
            {
                tag: 'list', head: '资源更新',
                content: [
                    { text: '功能资源更新提示', swiKey: 'functionResNotify' },
                    { text: '指南资源更新提示', swiKey: 'pageResNotify' }
                ]
            },
            {
                tag: 'list', head: '如果页面显示出现问题请刷新资源',
                content: [
                    { text: '刷新功能资源', button: 'refreshFunc' },
                    { text: '刷新指南资源', button: 'refreshGuide' }
                ]
            },
            { tag: 'foot' }
        ]
    },
    onNavigate: function (res) {
        for (var i = 0; i <= 23; i++)
            time[0].push(i + "\u65F6");
        for (var i = 0; i <= 59; i++)
            if (i < 10)
                time[1].push("0" + i + "\u5206");
            else
                time[1].push(i + "\u5206");
        var list = this.data.page[3].content;
        var nightmodeAutoChange = wx.getStorageSync('nightmodeAutoChange');
        var dayBrightnessChange = wx.getStorageSync('dayBrightnessChange');
        var nightBrightnessChange = wx.getStorageSync('nightBrightnessChange');
        if (!nightmodeAutoChange) {
            list[1].hidden = true;
            list[2].hidden = true;
        }
        if (a.nm)
            list[3].hidden = true;
        else
            list[5].hidden = true;
        if (!dayBrightnessChange || a.nm)
            list[4].hidden = true;
        if (!nightBrightnessChange || !a.nm)
            list[6].hidden = true;
        page_1.default.resolve(res, this.data.page);
    },
    onLoad: function (option) {
        if (a.page.aim === option.aim)
            page_1.default.Set({ option: option, ctx: this });
        else {
            var list = this.data.page[3].content;
            var nightmodeAutoChange = wx.getStorageSync('nightmodeAutoChange');
            var dayBrightnessChange = wx.getStorageSync('dayBrightnessChange');
            var nightBrightnessChange = wx.getStorageSync('nightBrightnessChange');
            if (!nightmodeAutoChange) {
                list[1].hidden = true;
                list[2].hidden = true;
            }
            if (a.nm)
                list[3].hidden = true;
            else
                list[5].hidden = true;
            if (!dayBrightnessChange || a.nm)
                list[4].hidden = true;
            if (!nightBrightnessChange || !a.nm)
                list[6].hidden = true;
            page_1.default.Set({ option: option, ctx: this }, this.data.page);
        }
        page_1.default.Notice('theme');
    },
    onShow: function () {
        var _a = page_1.default.color(this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
        wx.setNavigationBarColor(nc);
        wx.setBackgroundColor(bc);
    },
    onPageScroll: function (e) {
        component_1.default.nav(e, this);
    },
    cA: function (e) {
        component_1.default.trigger(e, this);
    },
    onUnload: function () {
        a.nm = app_1.nightmode();
    },
    setTheme: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function (type) {
            if (type === 'change') {
                var theme = _this.data.page[1].content[0].pickerValue[e.detail.value];
                a.T = theme;
                wx.setStorageSync('theme', theme);
                page_1.default.Set({ option: { aim: 'settings' }, ctx: _this }, _this.data.page);
                _this.$emit('theme', theme);
                console.log("theme\u5207\u6362\u4E3A" + theme);
            }
        });
    },
    switchnm: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            var value = e.detail.value;
            list[0].status = false;
            list[1].hidden = list[2].hidden = true;
            list[1].visible = list[2].visible = false;
            if (value) {
                list[3].hidden = list[4].hidden = true;
                list[4].visible = list[5].hidden = false;
                if (list[5].status) {
                    list[6].hidden = false;
                    wx.setScreenBrightness({ value: list[6].value / 100 });
                }
                else {
                    list[6].hidden = true;
                    list[6].visible = false;
                }
            }
            else {
                list[5].hidden = list[6].hidden = true;
                list[6].visible = list[3].hidden = false;
                if (list[3].status) {
                    list[4].hidden = false;
                    wx.setScreenBrightness({ value: list[4].value / 100 });
                }
                else {
                    list[4].hidden = true;
                    list[4].visible = false;
                }
            }
            wx.setStorageSync('nightmodeAutoChange', false);
            _this.setData({ nm: value, page: page });
            a.nm = value;
            _this.$emit('nightmode', value);
            var _a = value ? ['#ffffff', '#000000'] : ['#000000', '#ffffff'], frontColor = _a[0], backgroundColor = _a[1];
            wx.setNavigationBarColor({ frontColor: frontColor, backgroundColor: backgroundColor });
        });
    },
    switchnmAC: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            var nm = app_1.nightmode();
            page[2].content[0].status = nm;
            wx.setStorageSync('nightmode', nm);
            if (nm && list[5].status)
                wx.setScreenBrightness({ value: list[6].value / 100 });
            else if (!nm && list[3].status)
                wx.setScreenBrightness({ value: list[4].value / 100 });
            if (e.detail.value) {
                list[1].hidden = false;
                list[2].hidden = false;
            }
            else {
                list[1].hidden = list[2].hidden = true;
                list[1].visible = list[2].visible = false;
            }
            if (nm) {
                list[3].hidden = list[4].hidden = true;
                list[4].visible = list[5].hidden = false;
                list[6].hidden = !list[5].status;
            }
            else {
                list[3].hidden = list[6].visible = false;
                list[5].hidden = list[6].hidden = true;
                list[4].hidden = !list[3].status;
            }
            _this.setData({ nm: nm, page: page });
            a.nm = nm;
            _this.$emit('nightmode', nm);
            var _a = page_1.default.color(_this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
            wx.setNavigationBarColor(nc);
            wx.setBackgroundColor(bc);
        });
    },
    dayBrightnessSwitchHandler: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            list[4].visible = e.detail.value;
            list[4].hidden = !e.detail.value;
            _this.setData({ page: page });
        });
    },
    nightBrightnessSwitchHandler: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            list[6].visible = e.detail.value;
            list[6].hidden = !e.detail.value;
            _this.setData({ page: page });
        });
    },
    dayBrightnessHandler: function (e) {
        component_1.default.trigger(e, this);
        if (!a.nm && this.data.page[3].content[3].status)
            wx.setScreenBrightness({ value: e.detail.value / 100 });
    },
    nightBrightnessHandler: function (e) {
        component_1.default.trigger(e, this);
        if (a.nm && this.data.page[3].content[5].status)
            wx.setScreenBrightness({ value: e.detail.value / 100 });
    },
    refreshGuide: function () {
        tab_1.default.resDownload('page');
    },
    refreshFunc: function () {
        tab_1.default.resDownload('function');
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNldHRpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpQ0FBMkM7QUFDM0MsZ0RBQTRDO0FBQzVDLHNDQUFrQztBQUNsQyxvQ0FBZ0M7QUFDaEMsb0NBQXlDO0FBQ2pDLElBQUEsdUJBQWEsQ0FBYztBQUduQyxJQUFNLElBQUksR0FBZSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVsQyxnQkFBUyxDQUFDLFNBQVMsRUFBRTtJQUNuQixJQUFJLEVBQUU7UUFDSixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDTixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDUixJQUFJLEVBQUU7WUFDSixFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO1lBQ3hDO2dCQUNFLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsZUFBZTtnQkFDaEQsT0FBTyxFQUFFO29CQUNQO3dCQUNFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsVUFBVTtxQkFFakc7aUJBQ0Y7YUFDRjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxNQUFNO2dCQUNYLElBQUksRUFBRSxNQUFNO2dCQUNaLElBQUksRUFBRSxxQ0FBcUM7Z0JBQzNDLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsQ0FBQzthQUNyRTtZQUNEO2dCQUNFLEdBQUcsRUFBRSxNQUFNO2dCQUNYLElBQUksRUFBRSxVQUFVO2dCQUNoQixPQUFPLEVBQUU7b0JBQ1AsRUFBRSxJQUFJ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LG1CQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFBRSxFQUFFLENBQUMsbUJBQW1CLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUMzRyxDQUFDO0lBQ0QsWUFBWTtRQUNWLGFBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUNELFdBQVc7UUFDVCxhQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0FDRixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgd3ggZ2V0QXBwKi9cbmltcG9ydCAkcmVnaXN0ZXIsIHsgV1hQYWdlIH0gZnJvbSAnd3hwYWdlJztcbmltcG9ydCAkY29tcG9uZW50IGZyb20gJy4uL3V0aWxzL2NvbXBvbmVudCc7XG5pbXBvcnQgJHBhZ2UgZnJvbSAnLi4vdXRpbHMvcGFnZSc7XG5pbXBvcnQgJHRhYiBmcm9tICcuLi91dGlscy90YWInO1xuaW1wb3J0IHsgbmlnaHRtb2RlIH0gZnJvbSAnLi4vdXRpbHMvYXBwJztcbmNvbnN0IHsgZ2xvYmFsRGF0YTogYSB9ID0gZ2V0QXBwKCk7XG5cbi8vIOeUn+aIkOaXtumXtFxuY29uc3QgdGltZTogc3RyaW5nW11bXSA9IFtbXSwgW11dO1xuXG4kcmVnaXN0ZXIoJ3NldHRpbmcnLCB7XG4gIGRhdGE6IHtcbiAgICBUOiBhLlQsXG4gICAgbm06IGEubm0sXG4gICAgcGFnZTogW1xuICAgICAgeyB0YWc6ICdoZWFkJywgdGl0bGU6ICforr7nva4nLCBncmV5OiB0cnVlIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2xpc3QnLCBoZWFkOiAn5Li76aKY6K6+572uJywgZm9vdDogJ+ebruWJjWlPU+S4u+mimOWPr+S7peWujOe+juaYvuekuicsXG4gICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0ZXh0OiAn5Li76aKY6K6+572uJywga2V5OiAndGhlbWVOdW0nLCBzaW5nbGU6IHRydWUsIHBpY2tlclZhbHVlOiBbJ2lPUycsICdBbmRyb2lkJ10sIHBpY2tlcjogJ3NldFRoZW1lJ1xuICAgICAgICAgICAgLy8gUGlja2VyVmFsdWU6IFtcImlPU1wiLCBcIkFuZHJvaWRcIiwgXCJORU5VXCJdLFxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnbGlzdCcsXG4gICAgICAgIGhlYWQ6ICflpJzpl7TmqKHlvI8nLFxuICAgICAgICBmb290OiAn5ZCv55So5ZCO77yM5bCG6YeH55So5pqX6Imy6IOM5pmv5LiO5Lqu6Imy5paH5a2X77yM5Zyo5L+d5oyB5pqX5YWJ5LiL5pi+56S65pWI5p6c55qE5ZCM5pe25L+d5oqk55y8552b44CCJyxcbiAgICAgICAgY29udGVudDogW3sgdGV4dDogJ+WknOmXtOaooeW8jycsIFN3aXRjaDogJ3N3aXRjaG5tJywgc3dpS2V5OiAnbmlnaHRtb2RlJyB9XVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnbGlzdCcsXG4gICAgICAgIGZvb3Q6ICfkuq7luqbmlbDmja7kuLrnmb7liIbmr5QnLFxuICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgeyB0ZXh0OiAn6K6+5a6a5pe26Ze0JywgU3dpdGNoOiAnc3dpdGNobm1BQycsIHN3aUtleTogJ25pZ2h0bW9kZUF1dG9DaGFuZ2UnIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn5byA5aeL5pe26Ze0JywgaW5sYXk6IHRydWUsIGtleTogJ25pZ2h0bW9kZVN0YXJ0VGltZScsIHBpY2tlclZhbHVlOiB0aW1lIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn57uT5p2f5pe26Ze0JywgaW5sYXk6IHRydWUsIGtleTogJ25pZ2h0bW9kZUVuZFRpbWUnLCBwaWNrZXJWYWx1ZTogdGltZSB9LFxuICAgICAgICAgIHsgdGV4dDogJ+aXpemXtOS6ruW6puiwg+aVtOW8gOWFsycsIFN3aXRjaDogJ2RheUJyaWdodG5lc3NTd2l0Y2hIYW5kbGVyJywgc3dpS2V5OiAnZGF5QnJpZ2h0bmVzc0NoYW5nZScgfSxcbiAgICAgICAgICB7IHRleHQ6ICfml6Xpl7TmqKHlvI/kuq7luqYnLCBzbGlkZXI6ICdkYXlCcmlnaHRuZXNzSGFuZGxlcicsIG1pbjogMCwgbWF4OiAxMDAsIHNsaUtleTogJ2RheUJyaWdodG5lc3MnIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn5aSc6Ze05Lqu5bqm6LCD5pW05byA5YWzJywgU3dpdGNoOiAnbmlnaHRCcmlnaHRuZXNzU3dpdGNoSGFuZGxlcicsIHN3aUtleTogJ25pZ2h0QnJpZ2h0bmVzc0NoYW5nZScgfSxcbiAgICAgICAgICB7IHRleHQ6ICflpJzpl7TmqKHlvI/kuq7luqYnLCBzbGlkZXI6ICduaWdodEJyaWdodG5lc3NIYW5kbGVyJywgbWluOiAwLCBtYXg6IDEwMCwgc2xpS2V5OiAnbmlnaHRCcmlnaHRuZXNzJyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2xpc3QnLCBoZWFkOiAn6LWE5rqQ5pu05pawJyxcbiAgICAgICAgY29udGVudDogW1xuICAgICAgICAgIHsgdGV4dDogJ+WKn+iDvei1hOa6kOabtOaWsOaPkOekuicsIHN3aUtleTogJ2Z1bmN0aW9uUmVzTm90aWZ5JyB9LFxuICAgICAgICAgIHsgdGV4dDogJ+aMh+WNl+i1hOa6kOabtOaWsOaPkOekuicsIHN3aUtleTogJ3BhZ2VSZXNOb3RpZnknIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnbGlzdCcsIGhlYWQ6ICflpoLmnpzpobXpnaLmmL7npLrlh7rnjrDpl67popjor7fliLfmlrDotYTmupAnLFxuICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgeyB0ZXh0OiAn5Yi35paw5Yqf6IO96LWE5rqQJywgYnV0dG9uOiAncmVmcmVzaEZ1bmMnIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn5Yi35paw5oyH5Y2X6LWE5rqQJywgYnV0dG9uOiAncmVmcmVzaEd1aWRlJyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7IHRhZzogJ2Zvb3QnIH1cbiAgICBdXG4gIH0sXG4gIG9uTmF2aWdhdGUocmVzOiBXWFBhZ2UuUGFnZUFyZykge1xuICAgIC8vIOeUn+aIkOaXtumXtFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDIzOyBpKyspIHRpbWVbMF0ucHVzaChgJHtpfeaXtmApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDU5OyBpKyspXG4gICAgICBpZiAoaSA8IDEwKSB0aW1lWzFdLnB1c2goYDAke2l95YiGYCk7XG4gICAgICBlbHNlIHRpbWVbMV0ucHVzaChgJHtpfeWIhmApO1xuXG4gICAgLy8g6K+75Y+W54q25oCB5pWw5o2u5bm25omn6KGM6aKE5Yqg6L29XG4gICAgY29uc3QgbGlzdCA9IHRoaXMuZGF0YS5wYWdlWzNdLmNvbnRlbnQ7XG4gICAgY29uc3QgbmlnaHRtb2RlQXV0b0NoYW5nZSA9IHd4LmdldFN0b3JhZ2VTeW5jKCduaWdodG1vZGVBdXRvQ2hhbmdlJyk7XG4gICAgY29uc3QgZGF5QnJpZ2h0bmVzc0NoYW5nZSA9IHd4LmdldFN0b3JhZ2VTeW5jKCdkYXlCcmlnaHRuZXNzQ2hhbmdlJyk7XG4gICAgY29uc3QgbmlnaHRCcmlnaHRuZXNzQ2hhbmdlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ25pZ2h0QnJpZ2h0bmVzc0NoYW5nZScpO1xuXG4gICAgaWYgKCFuaWdodG1vZGVBdXRvQ2hhbmdlKSB7XG4gICAgICBsaXN0WzFdLmhpZGRlbiA9IHRydWU7XG4gICAgICBsaXN0WzJdLmhpZGRlbiA9IHRydWU7XG4gICAgfVxuICAgIGlmIChhLm5tKSBsaXN0WzNdLmhpZGRlbiA9IHRydWU7XG4gICAgZWxzZSBsaXN0WzVdLmhpZGRlbiA9IHRydWU7XG4gICAgaWYgKCFkYXlCcmlnaHRuZXNzQ2hhbmdlIHx8IGEubm0pIGxpc3RbNF0uaGlkZGVuID0gdHJ1ZTtcbiAgICBpZiAoIW5pZ2h0QnJpZ2h0bmVzc0NoYW5nZSB8fCAhYS5ubSkgbGlzdFs2XS5oaWRkZW4gPSB0cnVlO1xuXG4gICAgJHBhZ2UucmVzb2x2ZShyZXMsIHRoaXMuZGF0YS5wYWdlKTtcbiAgfSxcbiAgb25Mb2FkKG9wdGlvbjogYW55KSB7XG4gICAgaWYgKGEucGFnZS5haW0gPT09IG9wdGlvbi5haW0pICRwYWdlLlNldCh7IG9wdGlvbiwgY3R4OiB0aGlzIH0pO1xuICAgIGVsc2Uge1xuICAgICAgY29uc3QgbGlzdCA9IHRoaXMuZGF0YS5wYWdlWzNdLmNvbnRlbnQ7XG4gICAgICBjb25zdCBuaWdodG1vZGVBdXRvQ2hhbmdlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ25pZ2h0bW9kZUF1dG9DaGFuZ2UnKTtcbiAgICAgIGNvbnN0IGRheUJyaWdodG5lc3NDaGFuZ2UgPSB3eC5nZXRTdG9yYWdlU3luYygnZGF5QnJpZ2h0bmVzc0NoYW5nZScpO1xuICAgICAgY29uc3QgbmlnaHRCcmlnaHRuZXNzQ2hhbmdlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ25pZ2h0QnJpZ2h0bmVzc0NoYW5nZScpO1xuXG4gICAgICBpZiAoIW5pZ2h0bW9kZUF1dG9DaGFuZ2UpIHtcbiAgICAgICAgbGlzdFsxXS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzJdLmhpZGRlbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoYS5ubSkgbGlzdFszXS5oaWRkZW4gPSB0cnVlO1xuICAgICAgZWxzZSBsaXN0WzVdLmhpZGRlbiA9IHRydWU7XG4gICAgICBpZiAoIWRheUJyaWdodG5lc3NDaGFuZ2UgfHwgYS5ubSkgbGlzdFs0XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgaWYgKCFuaWdodEJyaWdodG5lc3NDaGFuZ2UgfHwgIWEubm0pIGxpc3RbNl0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgICRwYWdlLlNldCh7IG9wdGlvbiwgY3R4OiB0aGlzIH0sIHRoaXMuZGF0YS5wYWdlKTtcbiAgICB9XG4gICAgJHBhZ2UuTm90aWNlKCd0aGVtZScpO1xuICB9LFxuICBvblNob3coKSB7XG4gICAgLy8g6K6+572u6IO25ZuK5ZKM6IOM5pmv6aKc6ImyXG4gICAgY29uc3QgeyBuYywgYmMgfSA9ICRwYWdlLmNvbG9yKHRoaXMuZGF0YS5wYWdlWzBdLmdyZXkpO1xuXG4gICAgd3guc2V0TmF2aWdhdGlvbkJhckNvbG9yKG5jKTtcbiAgICB3eC5zZXRCYWNrZ3JvdW5kQ29sb3IoYmMpO1xuICB9LFxuICBvblBhZ2VTY3JvbGwoZSkge1xuICAgICRjb21wb25lbnQubmF2KGUsIHRoaXMpO1xuICB9LFxuICBjQShlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcyk7XG4gIH0sXG4gIG9uVW5sb2FkKCkge1xuICAgIGEubm0gPSBuaWdodG1vZGUoKTtcbiAgfSxcbiAgc2V0VGhlbWUoZTogYW55KSB7XG4gICAgJGNvbXBvbmVudC50cmlnZ2VyKGUsIHRoaXMsIHR5cGUgPT4ge1xuICAgICAgaWYgKHR5cGUgPT09ICdjaGFuZ2UnKSB7XG4gICAgICAgIGNvbnN0IHRoZW1lID0gdGhpcy5kYXRhLnBhZ2VbMV0uY29udGVudFswXS5waWNrZXJWYWx1ZVtlLmRldGFpbC52YWx1ZV07XG5cbiAgICAgICAgYS5UID0gdGhlbWU7XG4gICAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCd0aGVtZScsIHRoZW1lKTtcbiAgICAgICAgJHBhZ2UuU2V0KHsgb3B0aW9uOiB7IGFpbTogJ3NldHRpbmdzJyB9LCBjdHg6IHRoaXMgfSwgdGhpcy5kYXRhLnBhZ2UpO1xuICAgICAgICB0aGlzLiRlbWl0ISgndGhlbWUnLCB0aGVtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGB0aGVtZeWIh+aNouS4uiR7dGhlbWV9YCk7IC8vIOiwg+ivlVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzd2l0Y2hubShlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwYWdlIH0gPSB0aGlzLmRhdGE7XG4gICAgICBjb25zdCBsaXN0ID0gcGFnZVszXS5jb250ZW50O1xuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gZS5kZXRhaWw7XG5cbiAgICAgIGxpc3RbMF0uc3RhdHVzID0gZmFsc2U7XG4gICAgICBsaXN0WzFdLmhpZGRlbiA9IGxpc3RbMl0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGxpc3RbMV0udmlzaWJsZSA9IGxpc3RbMl0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGxpc3RbM10uaGlkZGVuID0gbGlzdFs0XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzRdLnZpc2libGUgPSBsaXN0WzVdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBpZiAobGlzdFs1XS5zdGF0dXMpIHtcbiAgICAgICAgICBsaXN0WzZdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogbGlzdFs2XS52YWx1ZSAvIDEwMCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0WzZdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgbGlzdFs2XS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RbNV0uaGlkZGVuID0gbGlzdFs2XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzZdLnZpc2libGUgPSBsaXN0WzNdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBpZiAobGlzdFszXS5zdGF0dXMpIHtcbiAgICAgICAgICBsaXN0WzRdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogbGlzdFs0XS52YWx1ZSAvIDEwMCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0WzRdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgbGlzdFs0XS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCduaWdodG1vZGVBdXRvQ2hhbmdlJywgZmFsc2UpO1xuICAgICAgdGhpcy5zZXREYXRhISh7IG5tOiB2YWx1ZSwgcGFnZSB9KTtcbiAgICAgIGEubm0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuJGVtaXQhKCduaWdodG1vZGUnLCB2YWx1ZSk7XG4gICAgICBjb25zdCBbZnJvbnRDb2xvciwgYmFja2dyb3VuZENvbG9yXSA9IHZhbHVlID8gWycjZmZmZmZmJywgJyMwMDAwMDAnXSA6IFsnIzAwMDAwMCcsICcjZmZmZmZmJ107XG5cbiAgICAgIHd4LnNldE5hdmlnYXRpb25CYXJDb2xvcih7IGZyb250Q29sb3IsIGJhY2tncm91bmRDb2xvciB9KTtcbiAgICB9KTtcbiAgfSxcbiAgc3dpdGNobm1BQyhlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwYWdlIH0gPSB0aGlzLmRhdGE7XG4gICAgICBjb25zdCBsaXN0ID0gcGFnZVszXS5jb250ZW50O1xuICAgICAgY29uc3Qgbm0gPSBuaWdodG1vZGUoKTtcblxuICAgICAgcGFnZVsyXS5jb250ZW50WzBdLnN0YXR1cyA9IG5tO1xuICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ25pZ2h0bW9kZScsIG5tKTtcbiAgICAgIGlmIChubSAmJiBsaXN0WzVdLnN0YXR1cykgd3guc2V0U2NyZWVuQnJpZ2h0bmVzcyh7IHZhbHVlOiBsaXN0WzZdLnZhbHVlIC8gMTAwIH0pO1xuICAgICAgZWxzZSBpZiAoIW5tICYmIGxpc3RbM10uc3RhdHVzKSB3eC5zZXRTY3JlZW5CcmlnaHRuZXNzKHsgdmFsdWU6IGxpc3RbNF0udmFsdWUgLyAxMDAgfSk7XG4gICAgICBpZiAoZS5kZXRhaWwudmFsdWUpIHtcbiAgICAgICAgbGlzdFsxXS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgbGlzdFsyXS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RbMV0uaGlkZGVuID0gbGlzdFsyXS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzFdLnZpc2libGUgPSBsaXN0WzJdLnZpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChubSkge1xuICAgICAgICBsaXN0WzNdLmhpZGRlbiA9IGxpc3RbNF0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgbGlzdFs0XS52aXNpYmxlID0gbGlzdFs1XS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgbGlzdFs2XS5oaWRkZW4gPSAhbGlzdFs1XS5zdGF0dXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0WzNdLmhpZGRlbiA9IGxpc3RbNl0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBsaXN0WzVdLmhpZGRlbiA9IGxpc3RbNl0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgbGlzdFs0XS5oaWRkZW4gPSAhbGlzdFszXS5zdGF0dXM7XG4gICAgICB9XG4gICAgICB0aGlzLnNldERhdGEhKHsgbm0sIHBhZ2UgfSk7XG4gICAgICBhLm5tID0gbm07XG4gICAgICB0aGlzLiRlbWl0ISgnbmlnaHRtb2RlJywgbm0pO1xuXG4gICAgICAvLyDorr7nva7og7blm4rlkozog4zmma/popzoibJcbiAgICAgIGNvbnN0IHsgbmMsIGJjIH0gPSAkcGFnZS5jb2xvcih0aGlzLmRhdGEucGFnZVswXS5ncmV5KTtcblxuICAgICAgd3guc2V0TmF2aWdhdGlvbkJhckNvbG9yKG5jKTtcbiAgICAgIHd4LnNldEJhY2tncm91bmRDb2xvcihiYyk7XG4gICAgfSk7XG4gIH0sXG4gIGRheUJyaWdodG5lc3NTd2l0Y2hIYW5kbGVyKGU6IGFueSkge1xuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHBhZ2UgfSA9IHRoaXMuZGF0YTtcbiAgICAgIGNvbnN0IGxpc3QgPSBwYWdlWzNdLmNvbnRlbnQ7XG5cbiAgICAgIGxpc3RbNF0udmlzaWJsZSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgICAgbGlzdFs0XS5oaWRkZW4gPSAhZS5kZXRhaWwudmFsdWU7XG4gICAgICB0aGlzLnNldERhdGEhKHsgcGFnZSB9KTtcbiAgICB9KTtcbiAgfSxcbiAgbmlnaHRCcmlnaHRuZXNzU3dpdGNoSGFuZGxlcihlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwYWdlIH0gPSB0aGlzLmRhdGE7XG4gICAgICBjb25zdCBsaXN0ID0gcGFnZVszXS5jb250ZW50O1xuXG4gICAgICBsaXN0WzZdLnZpc2libGUgPSBlLmRldGFpbC52YWx1ZTtcbiAgICAgIGxpc3RbNl0uaGlkZGVuID0gIWUuZGV0YWlsLnZhbHVlO1xuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2UgfSk7XG4gICAgfSk7XG4gIH0sXG4gIGRheUJyaWdodG5lc3NIYW5kbGVyKGU6IGFueSkge1xuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzKTtcbiAgICBpZiAoIWEubm0gJiYgdGhpcy5kYXRhLnBhZ2VbM10uY29udGVudFszXS5zdGF0dXMpIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogZS5kZXRhaWwudmFsdWUgLyAxMDAgfSk7XG4gIH0sXG4gIG5pZ2h0QnJpZ2h0bmVzc0hhbmRsZXIoZTogYW55KSB7XG4gICAgJGNvbXBvbmVudC50cmlnZ2VyKGUsIHRoaXMpO1xuICAgIGlmIChhLm5tICYmIHRoaXMuZGF0YS5wYWdlWzNdLmNvbnRlbnRbNV0uc3RhdHVzKSB3eC5zZXRTY3JlZW5CcmlnaHRuZXNzKHsgdmFsdWU6IGUuZGV0YWlsLnZhbHVlIC8gMTAwIH0pO1xuICB9LFxuICByZWZyZXNoR3VpZGUoKSB7XG4gICAgJHRhYi5yZXNEb3dubG9hZCgncGFnZScpO1xuICB9LFxuICByZWZyZXNoRnVuYygpIHtcbiAgICAkdGFiLnJlc0Rvd25sb2FkKCdmdW5jdGlvbicpO1xuICB9XG59KTtcbiJdfQ==