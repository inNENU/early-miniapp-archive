"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var component_1 = require("../utils/component");
var page_1 = require("../utils/page");
var tab_1 = require("../utils/tab");
var a = getApp().globalData;
wxpage_1.default('function', {
    data: {
        T: a.T,
        nm: a.nm,
        page: [
            { tag: 'head', title: '功能大厅', action: true, grey: true }, {
                tag: 'grid',
                head: '',
                content: [
                    { text: '校园地图', icon: '/icon/tabPage/map.svg', url: '/function/map' },
                    { text: '音律东师', icon: '/icon/tabPage/music.svg', url: '/function/player' },
                    { text: '体测计算器', icon: '/icon/tabPage/calculate.svg', url: '/function/PEcal' }
                ]
            }
        ]
    },
    onPreload: function (res) {
        var pageData = this.$take('function');
        page_1.default.resolve(res, pageData ? pageData : wx.getStorageSync('function'));
        console.log("\u529F\u80FD\u5927\u5385\u9884\u52A0\u8F7D\u7528\u65F6" + (new Date().getTime() - a.date) + "ms");
    },
    onLoad: function () {
        page_1.default.Set({ option: { aim: 'function' }, ctx: this });
        page_1.default.Notice('function');
        tab_1.default.update('function', '70K');
    },
    onShow: function () {
        var _a = page_1.default.color(this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
        wx.setNavigationBarColor(nc);
        wx.setBackgroundColor(bc);
    },
    onReady: function () {
        var _this = this;
        this.$on('theme', function (T) {
            _this.setData({ T: T });
        });
        this.$on('nightmode', function (nm) {
            _this.setData({ nm: nm });
        });
        tab_1.default.markerSet();
    },
    onPullDownRefresh: function () {
        tab_1.default.refresh('guide', this, a);
        tab_1.default.update('function', '80K');
        wx.stopPullDownRefresh();
    },
    onPageScroll: function (e) {
        component_1.default.nav(e, this);
    },
    cA: function (e) {
        component_1.default.trigger(e, this);
    },
    onShareAppMessage: function () { return ({ title: '功能大厅', path: '/page/function' }); }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmdW5jdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLGlDQUEyQztBQUMzQyxnREFBNEM7QUFDNUMsc0NBQWtDO0FBQ2xDLG9DQUFnQztBQUN4QixJQUFBLHVCQUFhLENBQWM7QUFFbkMsZ0JBQVMsQ0FBQyxVQUFVLEVBQUU7SUFDcEIsSUFBSSxFQUFFO1FBQ0osQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ04sRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFO1FBQ1IsSUFBSSxFQUFFO1lBQ0osRUFBRSxHQUFHLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7Z0JBQ3hELEdBQUcsRUFBRSxNQUFNO2dCQUNYLElBQUksRUFBRSxFQUFFO2dCQUNSLE9BQU8sRUFBRTtvQkFDUCxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLHVCQUF1QixFQUFFLEdBQUcsRUFBRSxlQUFlLEVBQUU7b0JBQ3JFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUseUJBQXlCLEVBQUUsR0FBRyxFQUFFLGtCQUFrQixFQUFFO29CQUMxRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLDZCQUE2QixFQUFFLEdBQUcsRUFBRSxpQkFBaUIsRUFBRTtpQkFDL0U7YUFpQkY7U0FDRjtLQUNGO0lBQ0QsU0FBUyxFQUFULFVBQVUsR0FBbUI7UUFDM0IsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4QyxjQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE9BQU8sQ0FBQyxHQUFHLENBQUMsNERBQVksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxRQUFJLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBQ0QsTUFBTTtRQUNKLGNBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7UUFDdEQsY0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN6QixhQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBQ0QsTUFBTTtRQUVFLElBQUEsaURBQWdELEVBQTlDLFVBQUUsRUFBRSxVQUEwQyxDQUFDO1FBRXZELEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM3QixFQUFFLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNELE9BQU8sRUFBUDtRQUFBLGlCQVdDO1FBVEMsSUFBSSxDQUFDLEdBQUksQ0FBQyxPQUFPLEVBQUUsVUFBQyxDQUFTO1lBQzNCLEtBQUksQ0FBQyxPQUFRLENBQUMsRUFBRSxDQUFDLEdBQUEsRUFBRSxDQUFDLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsR0FBSSxDQUFDLFdBQVcsRUFBRSxVQUFDLEVBQVc7WUFDakMsS0FBSSxDQUFDLE9BQVEsQ0FBQyxFQUFFLEVBQUUsSUFBQSxFQUFFLENBQUMsQ0FBQztRQUN4QixDQUFDLENBQUMsQ0FBQztRQUdILGFBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBQ0QsaUJBQWlCO1FBQ2YsYUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9CLGFBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQy9CLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFDRCxZQUFZLFlBQUMsQ0FBQztRQUNaLG1CQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQ0QsRUFBRSxFQUFGLFVBQUcsQ0FBTTtRQUNQLG1CQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBQ0QsaUJBQWlCLEVBQUUsY0FBTSxPQUFBLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLEVBQTNDLENBQTJDO0NBQ3JFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IE1yLkhvcGVcclxuICogQERhdGU6IDIwMTktMDQtMTUgMDg6MTg6MDZcclxuICogQExhc3RFZGl0b3JzOiBNci5Ib3BlXHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMTktMDYtMjUgMTg6NTY6MjZcclxuICogQERlc2NyaXB0aW9uOiDlip/og73lpKfljoVcclxuICovXHJcbmltcG9ydCAkcmVnaXN0ZXIsIHsgV1hQYWdlIH0gZnJvbSAnd3hwYWdlJztcclxuaW1wb3J0ICRjb21wb25lbnQgZnJvbSAnLi4vdXRpbHMvY29tcG9uZW50JztcclxuaW1wb3J0ICRwYWdlIGZyb20gJy4uL3V0aWxzL3BhZ2UnO1xyXG5pbXBvcnQgJHRhYiBmcm9tICcuLi91dGlscy90YWInO1xyXG5jb25zdCB7IGdsb2JhbERhdGE6IGEgfSA9IGdldEFwcCgpO1xyXG5cclxuJHJlZ2lzdGVyKCdmdW5jdGlvbicsIHtcclxuICBkYXRhOiB7XHJcbiAgICBUOiBhLlQsXHJcbiAgICBubTogYS5ubSxcclxuICAgIHBhZ2U6IFtcclxuICAgICAgeyB0YWc6ICdoZWFkJywgdGl0bGU6ICflip/og73lpKfljoUnLCBhY3Rpb246IHRydWUsIGdyZXk6IHRydWUgfSwge1xyXG4gICAgICAgIHRhZzogJ2dyaWQnLFxyXG4gICAgICAgIGhlYWQ6ICcnLFxyXG4gICAgICAgIGNvbnRlbnQ6IFtcclxuICAgICAgICAgIHsgdGV4dDogJ+agoeWbreWcsOWbvicsIGljb246ICcvaWNvbi90YWJQYWdlL21hcC5zdmcnLCB1cmw6ICcvZnVuY3Rpb24vbWFwJyB9LFxyXG4gICAgICAgICAgeyB0ZXh0OiAn6Z+z5b6L5Lic5biIJywgaWNvbjogJy9pY29uL3RhYlBhZ2UvbXVzaWMuc3ZnJywgdXJsOiAnL2Z1bmN0aW9uL3BsYXllcicgfSxcclxuICAgICAgICAgIHsgdGV4dDogJ+S9k+a1i+iuoeeul+WZqCcsIGljb246ICcvaWNvbi90YWJQYWdlL2NhbGN1bGF0ZS5zdmcnLCB1cmw6ICcvZnVuY3Rpb24vUEVjYWwnIH1cclxuICAgICAgICBdXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiB9LCB7XHJcbiAgICAgICAgICogICB0YWc6ICdncmlkJyxcclxuICAgICAgICAgKiAgIGhlYWQ6ICfljbPlsIbmjqjlh7onLFxyXG4gICAgICAgICAqICAgY29udGVudDogW1xyXG4gICAgICAgICAqICAgICB7IHRleHQ6ICfmoKHlm63lhazkvJflj7cnLCBpY29uOiAnL2ljb24vZnVuY3Rpb24vZ3poLnN2ZycsIGFpbTogJ2d6aDAnIH0sXHJcbiAgICAgICAgICogICAgIHsgdGV4dDogJ+aIkOe7qeafpeivoicsIGljb246ICcvaWNvbi9mdW5jdGlvbi9leGFtLnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9MycgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiBcIuW9see6puS4nOW4iFwiLCBpY29uOiBcIi9pY29uL2Z1bmN0aW9uL21vdmllLnN2Z1wiLCB1cmw6IFwiL2Z1bmN0aW9uL3ZpZGVvXCIgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiAn6K++6KGo5p+l6K+iJywgaWNvbjogJy9pY29uL2Z1bmN0aW9uL3NjaGVkdWxlLnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9MycgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiAn6ICD5Zy65p+l6K+iJywgaWNvbjogJy9pY29uL2Z1bmN0aW9uL3Njb3JlLnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9NScgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiAn57up54K56K6h566XJywgaWNvbjogJy9pY29uL2Z1bmN0aW9uL3Njb3JlQ2FsLnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9MycgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiAn5pWF6Zqc5oql5L+uJywgaWNvbjogJy9pY29uL2Z1bmN0aW9uL3JlcGFpci5zdmcnLCB1cmw6ICcvbW9kdWxlL2J1aWxkaW5nP21vbnRoPTQnIH0sXHJcbiAgICAgICAgICogICAgIHsgdGV4dDogJ+S4nOW4iOaOoOW9sScsIGljb246ICcvaWNvbi9mdW5jdGlvbi9zY2VuZXJ5LnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9MScgfSxcclxuICAgICAgICAgKiAgICAgeyB0ZXh0OiAn5qCh5Y6GJywgaWNvbjogJy9pY29uL2Z1bmN0aW9uL2NhbGVuZGFyLnN2ZycsIHVybDogJy9tb2R1bGUvYnVpbGRpbmc/bW9udGg9MScgfVxyXG4gICAgICAgICAqICAgXVxyXG4gICAgICAgICAqL1xyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICBvblByZWxvYWQocmVzOiBXWFBhZ2UuUGFnZUFyZykge1xyXG4gICAgY29uc3QgcGFnZURhdGEgPSB0aGlzLiR0YWtlKCdmdW5jdGlvbicpO1xyXG5cclxuICAgICRwYWdlLnJlc29sdmUocmVzLCBwYWdlRGF0YSA/IHBhZ2VEYXRhIDogd3guZ2V0U3RvcmFnZVN5bmMoJ2Z1bmN0aW9uJykpO1xyXG4gICAgY29uc29sZS5sb2coYOWKn+iDveWkp+WOhemihOWKoOi9veeUqOaXtiR7bmV3IERhdGUoKS5nZXRUaW1lKCkgLSBhLmRhdGV9bXNgKTtcclxuICB9LFxyXG4gIG9uTG9hZCgpIHtcclxuICAgICRwYWdlLlNldCh7IG9wdGlvbjogeyBhaW06ICdmdW5jdGlvbicgfSwgY3R4OiB0aGlzIH0pO1xyXG4gICAgJHBhZ2UuTm90aWNlKCdmdW5jdGlvbicpO1xyXG4gICAgJHRhYi51cGRhdGUoJ2Z1bmN0aW9uJywgJzcwSycpO1xyXG4gIH0sXHJcbiAgb25TaG93KCkge1xyXG4gICAgLy8g6K6+572u6IO25ZuK5ZKM6IOM5pmv6aKc6ImyXHJcbiAgICBjb25zdCB7IG5jLCBiYyB9ID0gJHBhZ2UuY29sb3IodGhpcy5kYXRhLnBhZ2VbMF0uZ3JleSk7XHJcblxyXG4gICAgd3guc2V0TmF2aWdhdGlvbkJhckNvbG9yKG5jKTtcclxuICAgIHd4LnNldEJhY2tncm91bmRDb2xvcihiYyk7XHJcbiAgfSxcclxuICBvblJlYWR5KCkge1xyXG4gICAgLy8g5rOo5YaM5LqL5Lu255uR5ZCs5ZmoXHJcbiAgICB0aGlzLiRvbiEoJ3RoZW1lJywgKFQ6IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgVCB9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy4kb24hKCduaWdodG1vZGUnLCAobm06IGJvb2xlYW4pID0+IHtcclxuICAgICAgdGhpcy5zZXREYXRhISh7IG5tIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g5q2k5aSE6L+Y6ZyA6KaB5YaN5LyY5YyWXHJcbiAgICAkdGFiLm1hcmtlclNldCgpO1xyXG4gIH0sXHJcbiAgb25QdWxsRG93blJlZnJlc2goKSB7XHJcbiAgICAkdGFiLnJlZnJlc2goJ2d1aWRlJywgdGhpcywgYSk7XHJcbiAgICAkdGFiLnVwZGF0ZSgnZnVuY3Rpb24nLCAnODBLJyk7XHJcbiAgICB3eC5zdG9wUHVsbERvd25SZWZyZXNoKCk7XHJcbiAgfSxcclxuICBvblBhZ2VTY3JvbGwoZSkge1xyXG4gICAgJGNvbXBvbmVudC5uYXYoZSwgdGhpcyk7XHJcbiAgfSxcclxuICBjQShlOiBhbnkpIHtcclxuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzKTtcclxuICB9LFxyXG4gIG9uU2hhcmVBcHBNZXNzYWdlOiAoKSA9PiAoeyB0aXRsZTogJ+WKn+iDveWkp+WOhScsIHBhdGg6ICcvcGFnZS9mdW5jdGlvbicgfSlcclxufSk7XHJcbiJdfQ==