<map
  id="schoolMap"
  class="{{nm? 'nm': ''}} {{nm? 'dark': 'light'}}"
  subkey="NLVBZ-PGJRQ-T7K5F-GQ54N-GIXDH-FCBC4"
  longitude="{{map.longitude}}"
  latitude="{{map.latitude}}"
  scale="{{map.scale}}"
  markers="{{markers}}"
  setting="{{nm? nightMapSettings: dayMapSettings}}"
  catch:markertap="markers"
  catch:callouttap="markers"
  catch:updated="update"
  catch:regionchange="regionChange"
>
  <!-- 返回按钮 -->
  <cover-view
    class="backBtn"
    style="top:{{info.statusBarHeight + 5}}px;z-index:97;"
    hover-class="button-hover"
    catch:tap="back"
  >
    <cover-image
      class="backIcon"
      src="/icon/{{fistPage? 'home': 'back'}}{{nm? 'White': ''}}.png"
    />
  </cover-view>
  <!-- 放大按钮 -->
  <cover-view
    class="scale-large-button"
    hover-class="button-hover"
    data-action="enlarge"
    catch:tap="scale"
  >
    <cover-view>+</cover-view>
  </cover-view>
  <!-- 缩小按钮 -->
  <cover-view
    class="scale-small-button"
    hover-class="button-hover"
    data-action="narrow"
    catch:tap="scale"
  >
    <cover-view>-</cover-view>
  </cover-view>
  <cover-view
    class="close-button {{list? 'fadeIn': 'fadeOut'}}"
    style="top:{{closeTop}}px;z-index:100;"
    hover-class="button-hover"
    catch:tap="showList"
  >
    <cover-image class="icon" src="/icon/close.png" />
  </cover-view>
  <cover-view
    class="list-wrapper {{list? 'moveUpIn': 'moveUpOut'}}"
    style="top:{{info.screenHeight - tabHeight}}px;height:{{info.screenHeight - tabHeight}}px;"
  ></cover-view>
  <!-- 点位按钮 -->
  <cover-view class="point-button" hover-class="button-hover" catch:tap="point">
    <cover-image class="icon" src="/function/icon/point.png" />
  </cover-view>
  <!-- 分类按钮 -->
  <cover-view
    class="select-wrapper {{pointDisplay? 'fadeIn': 'fadeOut'}}"
    catch:tap="select"
  >
    <cover-view
      wx:for="{{category}}"
      wx:key="*this"
      class="button {{selectItem === item[1]? 'active': ''}}"
      hover-class="button-hover"
      data-category="{{item[1]}}"
    >
      <cover-view data-category="{{item[1]}}">{{item[0]}}</cover-view>
    </cover-view>
  </cover-view>
  <!-- 自定义tab栏 -->
  <cover-view class="tab" id="mapTab">
    <cover-view
      class="locate-button"
      hover-class="button-hover"
      catch:tap="moveToLocation"
    >
      <cover-image class="icon" src="/function/icon/locate.png" />
    </cover-view>
    <cover-view class="switch" catch:tap="xiaoquSwitch">
      <cover-view class="item {{isBenbu? 'active': ''}}">本部</cover-view>
      <cover-view class="item {{isBenbu? '': 'active'}}">净月</cover-view>
    </cover-view>
    <cover-view class="list-button {{list? 'active': ''}}" catch:tap="showList">
      <cover-image
        class="icon"
        src="/function/icon/list{{list? '-active': ''}}.png"
      />
    </cover-view>
  </cover-view>
</map>
