"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var setpage_1 = require("./utils/setpage");
var app_1 = require("./utils/app");
var $App = wxpage_1.default.A;
$App({
    globalData: {
        version: 'V 2.0.0',
        music: { play: false, played: false, index: 0 },
        page: {
            data: [],
            aim: ''
        }
    },
    config: {
        route: ['/page/$page', '/module/$page', '/function/$page', '/settings/$page'],
        resolvePath: function (name) { return ['main', 'function', 'guide', 'me'].includes(name)
            ? "/page/" + name
            : ['setting', '2.0', 'about'].includes(name) ? "/settings/" + name : "/module/" + name; }
    },
    onLaunch: function (opts) {
        console.info('小程序启动，参数为', opts);
        this.globalData.date = new Date();
        setpage_1.default.init(this.globalData);
        if (!wx.getStorageSync('inited'))
            app_1.default.appInit();
        this.globalData.T = wx.getStorageSync('theme');
        this.globalData.nm = app_1.default.nightmode();
        this.globalData.info = wx.getSystemInfoSync();
        console.info('设备信息为', this.globalData.info);
        app_1.default.startup(this.globalData.version);
    },
    onAwake: function (time) {
        console.log('小程序在', time, 'ms之后被唤醒');
        this.logger.debug("\"onAwake after " + time + "ms");
        this.globalData.nm = app_1.default.nightmode();
        app_1.default.noticeCheck(this.globalData.version);
        app_1.default.appUpdate();
    },
    onError: function (errorMsg) {
        console.error('出错信息为：', errorMsg);
        this.logger.warn('Error ocurred', errorMsg);
    },
    onPageNotFound: function (msg) {
        wx.switchTab({ url: 'pages/main' });
        console.warn('未找到界面:', msg);
        this.logger.warn('未找到界面', msg);
    },
    logger: wx.getLogManager({ level: 1 })
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaUNBQStCO0FBQy9CLDJDQUFvQztBQUNwQyxtQ0FBOEI7QUFFOUIsSUFBTSxJQUFJLEdBQUcsZ0JBQVMsQ0FBQyxDQUFDLENBQUM7QUFJekIsSUFBSSxDQUFDO0lBR0gsVUFBVSxFQUFFO1FBQ1YsT0FBTyxFQUFFLFNBQVM7UUFDbEIsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7UUFDL0MsSUFBSSxFQUFFO1lBQ0osSUFBSSxFQUFFLEVBQUU7WUFDUixHQUFHLEVBQUUsRUFBRTtTQUNSO0tBRUY7SUFHRCxNQUFNLEVBQUU7UUFDTixLQUFLLEVBQUUsQ0FBQyxhQUFhLEVBQUUsZUFBZSxFQUFFLGlCQUFpQixFQUFFLGlCQUFpQixDQUFDO1FBRTdFLFdBQVcsRUFBRSxVQUFDLElBQVksSUFBSyxPQUFBLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztZQUMvRSxDQUFDLENBQUMsV0FBUyxJQUFNO1lBQ2pCLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFhLElBQU0sQ0FBQyxDQUFDLENBQUMsYUFBVyxJQUFNLEVBRnpELENBRXlEO0tBQ3pGO0lBRUQsUUFBUSxZQUFDLElBQUk7UUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQU9oQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBR2xDLGlCQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUc1QixJQUFJLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFBRSxhQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFHaEQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxhQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFOUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU1QyxhQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUNELE9BQU8sRUFBUCxVQUFRLElBQVk7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLHFCQUFrQixJQUFJLE9BQUksQ0FBQyxDQUFDO1FBRzlDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLGFBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUVyQyxhQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDekMsYUFBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFJRCxPQUFPLFlBQUMsUUFBUTtRQUNkLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ0QsY0FBYyxZQUFDLEdBQUc7UUFHaEIsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDO1FBRXBDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBR0QsTUFBTSxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7Q0FDdkMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHd4Ki9cbmltcG9ydCAkcmVnaXN0ZXIgZnJvbSAnd3hwYWdlJztcbmltcG9ydCAkcGFnZSBmcm9tICcuL3V0aWxzL3NldHBhZ2UnO1xuaW1wb3J0IGFwcCBmcm9tICcuL3V0aWxzL2FwcCc7XG5cbmNvbnN0ICRBcHAgPSAkcmVnaXN0ZXIuQTtcblxuLy8gVmFyIHdvcmtlciA9IHd4LmNyZWF0ZVdvcmtlcihcIndvcmtlci93b3JrZXIuanNcIikgLy93b3JrZXIgdGVzdFxuXG4kQXBwKHtcblxuICAvLyDlsI/nqIvluo/lhajlsYDmlbDmja5cbiAgZ2xvYmFsRGF0YToge1xuICAgIHZlcnNpb246ICdWIDIuMC4wJyxcbiAgICBtdXNpYzogeyBwbGF5OiBmYWxzZSwgcGxheWVkOiBmYWxzZSwgaW5kZXg6IDAgfSxcbiAgICBwYWdlOiB7XG4gICAgICBkYXRhOiBbXSxcbiAgICAgIGFpbTogJydcbiAgICB9XG4gICAgLy8gVCwgbm0sIGRhdGUsIGluZm/kuZ/lnKhnbG9iYWxEYXRh5LitXG4gIH0sXG5cbiAgLy8g6Lev5b6E6Kej5p6Q6YWN572uXG4gIGNvbmZpZzoge1xuICAgIHJvdXRlOiBbJy9wYWdlLyRwYWdlJywgJy9tb2R1bGUvJHBhZ2UnLCAnL2Z1bmN0aW9uLyRwYWdlJywgJy9zZXR0aW5ncy8kcGFnZSddLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcbiAgICByZXNvbHZlUGF0aDogKG5hbWU6IHN0cmluZykgPT4gWydtYWluJywgJ2Z1bmN0aW9uJywgJ2d1aWRlJywgJ21lJ10uaW5jbHVkZXMobmFtZSlcbiAgICAgID8gYC9wYWdlLyR7bmFtZX1gXG4gICAgICA6IFsnc2V0dGluZycsICcyLjAnLCAnYWJvdXQnXS5pbmNsdWRlcyhuYW1lKSA/IGAvc2V0dGluZ3MvJHtuYW1lfWAgOiBgL21vZHVsZS8ke25hbWV9YFxuICB9LFxuXG4gIG9uTGF1bmNoKG9wdHMpIHtcbiAgICBjb25zb2xlLmluZm8oJ+Wwj+eoi+W6j+WQr+WKqO+8jOWPguaVsOS4uicsIG9wdHMpOyAvLyDosIPor5VcblxuICAgIC8vIENvbnN0IGNhcHN1bGUgPSB3eC5nZXRNZW51QnV0dG9uQm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAvLyBDb25zb2xlLmxvZyhjYXBzdWxlKTtcblxuICAgIC8vIOS/neWtmOWQr+WKqOaXtumXtFxuICAgIHRoaXMuZ2xvYmFsRGF0YS5kYXRlID0gbmV3IERhdGUoKTtcblxuICAgIC8vIOWIneWni+WMluW6k1xuICAgICRwYWdlLmluaXQodGhpcy5nbG9iYWxEYXRhKTtcblxuICAgIC8vIOWmguaenOWIneasoeWQr+WKqOaJp+ihjOWIneWni+WMllxuICAgIGlmICghd3guZ2V0U3RvcmFnZVN5bmMoJ2luaXRlZCcpKSBhcHAuYXBwSW5pdCgpO1xuXG4gICAgLy8g6I635Y+W5Li76aKY44CB5aSc6Ze05qih5byP44CB6K6+5aSH5L+h5oGvXG4gICAgdGhpcy5nbG9iYWxEYXRhLlQgPSB3eC5nZXRTdG9yYWdlU3luYygndGhlbWUnKTtcbiAgICB0aGlzLmdsb2JhbERhdGEubm0gPSBhcHAubmlnaHRtb2RlKCk7XG4gICAgdGhpcy5nbG9iYWxEYXRhLmluZm8gPSB3eC5nZXRTeXN0ZW1JbmZvU3luYygpO1xuXG4gICAgY29uc29sZS5pbmZvKCforr7lpIfkv6Hmga/kuLonLCB0aGlzLmdsb2JhbERhdGEuaW5mbyk7IC8vIOiwg+ivlVxuXG4gICAgYXBwLnN0YXJ0dXAodGhpcy5nbG9iYWxEYXRhLnZlcnNpb24pO1xuICB9LFxuICBvbkF3YWtlKHRpbWU6IG51bWJlcikge1xuICAgIGNvbnNvbGUubG9nKCflsI/nqIvluo/lnKgnLCB0aW1lLCAnbXPkuYvlkI7ooqvllKTphpInKTtcbiAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgXCJvbkF3YWtlIGFmdGVyICR7dGltZX1tc2ApOy8vIOiwg+ivlVxuXG4gICAgLy8g6YeN5paw5bqU55So5aSc6Ze05qih5byP44CBXG4gICAgdGhpcy5nbG9iYWxEYXRhLm5tID0gYXBwLm5pZ2h0bW9kZSgpO1xuXG4gICAgYXBwLm5vdGljZUNoZWNrKHRoaXMuZ2xvYmFsRGF0YS52ZXJzaW9uKTtcbiAgICBhcHAuYXBwVXBkYXRlKCk7XG4gIH0sXG5cbiAgLy8gT25TaG93OiBmdW5jdGlvbiAoKSB7IH0sXG5cbiAgb25FcnJvcihlcnJvck1zZykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+WHuumUmeS/oeaBr+S4uu+8micsIGVycm9yTXNnKTtcbiAgICB0aGlzLmxvZ2dlci53YXJuKCdFcnJvciBvY3VycmVkJywgZXJyb3JNc2cpOyAvLyDosIPor5VcbiAgfSxcbiAgb25QYWdlTm90Rm91bmQobXNnKSB7XG5cbiAgICAvLyDph43lrprlkJHliLDkuLvnlYzpnaJcbiAgICB3eC5zd2l0Y2hUYWIoeyB1cmw6ICdwYWdlcy9tYWluJyB9KTtcblxuICAgIGNvbnNvbGUud2Fybign5pyq5om+5Yiw55WM6Z2iOicsIG1zZyk7XG4gICAgdGhpcy5sb2dnZXIud2Fybign5pyq5om+5Yiw55WM6Z2iJywgbXNnKTsgLy8g6LCD6K+VXG4gIH0sXG5cbiAgLy8g5pel5b+X566h55CG5Zmo5a+56LGhXG4gIGxvZ2dlcjogd3guZ2V0TG9nTWFuYWdlcih7IGxldmVsOiAxIH0pXG59KTtcbiJdfQ==