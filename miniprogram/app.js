"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var app_1 = require("./utils/app");
var $App = wxpage_1.default.A;
$App({
    globalData: {
        version: 'V 2.0.0',
        music: { play: false, played: false, index: 0 },
        page: {
            data: [],
            aim: ''
        }
    },
    config: {
        route: ['/page/$page', '/module/$page', '/function/$page', '/settings/$page'],
        resolvePath: function (name) { return ['main', 'function', 'guide', 'me'].includes(name)
            ? "/page/" + name
            : ['setting', '2.0', 'about'].includes(name) ? "/settings/" + name : "/module/" + name; }
    },
    onLaunch: function (opts) {
        console.info('小程序启动，参数为', opts);
        this.globalData.date = new Date();
        this.lib.$page.init(this.globalData);
        if (!wx.getStorageSync('inited'))
            app_1.default.appInit();
        this.globalData.T = wx.getStorageSync('theme');
        this.globalData.nm = app_1.default.nightmode();
        this.globalData.info = wx.getSystemInfoSync();
        console.info('设备信息为', this.globalData.info);
        app_1.default.startup(this.globalData.version);
    },
    onAwake: function (time) {
        console.log('小程序在', time, 'ms之后被唤醒');
        this.logger.debug("\"onAwake after " + time + "ms");
        this.globalData.nm = app_1.default.nightmode();
        app_1.default.noticeCheck(this.globalData.version);
        app_1.default.appUpdate();
    },
    onError: function (errorMsg) {
        console.error('出错信息为：', errorMsg);
        this.logger.warn('Error ocurred', errorMsg);
    },
    onPageNotFound: function (msg) {
        wx.switchTab({ url: 'pages/main' });
        console.warn('未找到界面:', msg);
        this.logger.warn('未找到界面', msg);
    },
    logger: wx.getLogManager({ level: 1 })
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsaUNBQStCO0FBQy9CLG1DQUE4QjtBQUU5QixJQUFNLElBQUksR0FBRyxnQkFBUyxDQUFDLENBQUMsQ0FBQztBQUl6QixJQUFJLENBQUM7SUFHSCxVQUFVLEVBQUU7UUFDVixPQUFPLEVBQUUsU0FBUztRQUNsQixLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRTtRQUMvQyxJQUFJLEVBQUU7WUFDSixJQUFJLEVBQUUsRUFBRTtZQUNSLEdBQUcsRUFBRSxFQUFFO1NBQ1I7S0FFRjtJQUdELE1BQU0sRUFBRTtRQUNOLEtBQUssRUFBRSxDQUFDLGFBQWEsRUFBRSxlQUFlLEVBQUUsaUJBQWlCLEVBQUUsaUJBQWlCLENBQUM7UUFFN0UsV0FBVyxFQUFFLFVBQUMsSUFBWSxJQUFLLE9BQUEsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQy9FLENBQUMsQ0FBQyxXQUFTLElBQU07WUFDakIsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWEsSUFBTSxDQUFDLENBQUMsQ0FBQyxhQUFXLElBQU0sRUFGekQsQ0FFeUQ7S0FDekY7SUFFRCxRQUFRLFlBQUMsSUFBSTtRQUNYLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBT2hDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFHbEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUdyQyxJQUFJLENBQUMsRUFBRSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFBRSxhQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7UUFHaEQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsR0FBRyxhQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFFOUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU1QyxhQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUNELE9BQU8sRUFBUCxVQUFRLElBQVk7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLHFCQUFrQixJQUFJLE9BQUksQ0FBQyxDQUFDO1FBRzlDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxHQUFHLGFBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUVyQyxhQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDekMsYUFBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFJRCxPQUFPLFlBQUMsUUFBUTtRQUNkLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBQ0QsY0FBYyxZQUFDLEdBQUc7UUFHaEIsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDO1FBRXBDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBR0QsTUFBTSxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7Q0FDdkMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHd4Ki9cbmltcG9ydCAkcmVnaXN0ZXIgZnJvbSAnd3hwYWdlJztcbmltcG9ydCBhcHAgZnJvbSAnLi91dGlscy9hcHAnO1xuXG5jb25zdCAkQXBwID0gJHJlZ2lzdGVyLkE7XG5cbi8vIFZhciB3b3JrZXIgPSB3eC5jcmVhdGVXb3JrZXIoXCJ3b3JrZXIvd29ya2VyLmpzXCIpIC8vd29ya2VyIHRlc3RcblxuJEFwcCh7XG5cbiAgLy8g5bCP56iL5bqP5YWo5bGA5pWw5o2uXG4gIGdsb2JhbERhdGE6IHtcbiAgICB2ZXJzaW9uOiAnViAyLjAuMCcsXG4gICAgbXVzaWM6IHsgcGxheTogZmFsc2UsIHBsYXllZDogZmFsc2UsIGluZGV4OiAwIH0sXG4gICAgcGFnZToge1xuICAgICAgZGF0YTogW10sXG4gICAgICBhaW06ICcnXG4gICAgfVxuICAgIC8vIFQsIG5tLCBkYXRlLCBpbmZv5Lmf5ZyoZ2xvYmFsRGF0YeS4rVxuICB9LFxuXG4gIC8vIOi3r+W+hOino+aekOmFjee9rlxuICBjb25maWc6IHtcbiAgICByb3V0ZTogWycvcGFnZS8kcGFnZScsICcvbW9kdWxlLyRwYWdlJywgJy9mdW5jdGlvbi8kcGFnZScsICcvc2V0dGluZ3MvJHBhZ2UnXSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG4gICAgcmVzb2x2ZVBhdGg6IChuYW1lOiBzdHJpbmcpID0+IFsnbWFpbicsICdmdW5jdGlvbicsICdndWlkZScsICdtZSddLmluY2x1ZGVzKG5hbWUpXG4gICAgICA/IGAvcGFnZS8ke25hbWV9YFxuICAgICAgOiBbJ3NldHRpbmcnLCAnMi4wJywgJ2Fib3V0J10uaW5jbHVkZXMobmFtZSkgPyBgL3NldHRpbmdzLyR7bmFtZX1gIDogYC9tb2R1bGUvJHtuYW1lfWBcbiAgfSxcblxuICBvbkxhdW5jaChvcHRzKSB7XG4gICAgY29uc29sZS5pbmZvKCflsI/nqIvluo/lkK/liqjvvIzlj4LmlbDkuLonLCBvcHRzKTsgLy8g6LCD6K+VXG5cbiAgICAvLyBDb25zdCBjYXBzdWxlID0gd3guZ2V0TWVudUJ1dHRvbkJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gQ29uc29sZS5sb2coY2Fwc3VsZSk7XG5cbiAgICAvLyDkv53lrZjlkK/liqjml7bpl7RcbiAgICB0aGlzLmdsb2JhbERhdGEuZGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAvLyDliJ3lp4vljJblupNcbiAgICB0aGlzLmxpYi4kcGFnZS5pbml0KHRoaXMuZ2xvYmFsRGF0YSk7XG5cbiAgICAvLyDlpoLmnpzliJ3mrKHlkK/liqjmiafooYzliJ3lp4vljJZcbiAgICBpZiAoIXd4LmdldFN0b3JhZ2VTeW5jKCdpbml0ZWQnKSkgYXBwLmFwcEluaXQoKTtcblxuICAgIC8vIOiOt+WPluS4u+mimOOAgeWknOmXtOaooeW8j+OAgeiuvuWkh+S/oeaBr1xuICAgIHRoaXMuZ2xvYmFsRGF0YS5UID0gd3guZ2V0U3RvcmFnZVN5bmMoJ3RoZW1lJyk7XG4gICAgdGhpcy5nbG9iYWxEYXRhLm5tID0gYXBwLm5pZ2h0bW9kZSgpO1xuICAgIHRoaXMuZ2xvYmFsRGF0YS5pbmZvID0gd3guZ2V0U3lzdGVtSW5mb1N5bmMoKTtcblxuICAgIGNvbnNvbGUuaW5mbygn6K6+5aSH5L+h5oGv5Li6JywgdGhpcy5nbG9iYWxEYXRhLmluZm8pOyAvLyDosIPor5VcblxuICAgIGFwcC5zdGFydHVwKHRoaXMuZ2xvYmFsRGF0YS52ZXJzaW9uKTtcbiAgfSxcbiAgb25Bd2FrZSh0aW1lOiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmxvZygn5bCP56iL5bqP5ZyoJywgdGltZSwgJ21z5LmL5ZCO6KKr5ZSk6YaSJyk7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYFwib25Bd2FrZSBhZnRlciAke3RpbWV9bXNgKTsvLyDosIPor5VcblxuICAgIC8vIOmHjeaWsOW6lOeUqOWknOmXtOaooeW8j+OAgVxuICAgIHRoaXMuZ2xvYmFsRGF0YS5ubSA9IGFwcC5uaWdodG1vZGUoKTtcblxuICAgIGFwcC5ub3RpY2VDaGVjayh0aGlzLmdsb2JhbERhdGEudmVyc2lvbik7XG4gICAgYXBwLmFwcFVwZGF0ZSgpO1xuICB9LFxuXG4gIC8vIE9uU2hvdzogZnVuY3Rpb24gKCkgeyB9LFxuXG4gIG9uRXJyb3IoZXJyb3JNc2cpIHtcbiAgICBjb25zb2xlLmVycm9yKCflh7rplJnkv6Hmga/kuLrvvJonLCBlcnJvck1zZyk7XG4gICAgdGhpcy5sb2dnZXIud2FybignRXJyb3Igb2N1cnJlZCcsIGVycm9yTXNnKTsgLy8g6LCD6K+VXG4gIH0sXG4gIG9uUGFnZU5vdEZvdW5kKG1zZykge1xuXG4gICAgLy8g6YeN5a6a5ZCR5Yiw5Li755WM6Z2iXG4gICAgd3guc3dpdGNoVGFiKHsgdXJsOiAncGFnZXMvbWFpbicgfSk7XG5cbiAgICBjb25zb2xlLndhcm4oJ+acquaJvuWIsOeVjOmdojonLCBtc2cpO1xuICAgIHRoaXMubG9nZ2VyLndhcm4oJ+acquaJvuWIsOeVjOmdoicsIG1zZyk7IC8vIOiwg+ivlVxuICB9LFxuXG4gIC8vIOaXpeW/l+euoeeQhuWZqOWvueixoVxuICBsb2dnZXI6IHd4LmdldExvZ01hbmFnZXIoeyBsZXZlbDogMSB9KVxufSk7XG4iXX0=