"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var wxpage_1 = require("wxpage");
var component_1 = require("../utils/component");
var setpage_1 = require("../utils/setpage");
var tab_1 = require("../utils/tab");
var app_1 = require("../utils/app");
var a = getApp().globalData;
var time = [[], []];
wxpage_1.default('setting', {
    data: {
        T: a.T,
        nm: a.nm,
        page: [
            { tag: 'head', title: '设置', grey: true },
            {
                tag: 'list', head: '主题设置', foot: '目前iOS主题可以完美显示',
                content: [
                    {
                        text: '主题设置', key: 'themeNum', single: true, pickerValue: ['iOS', 'Android'], picker: 'setTheme'
                    }
                ]
            },
            {
                tag: 'list',
                head: '夜间模式',
                foot: '启用后，将采用暗色背景与亮色文字，在保持暗光下显示效果的同时保护眼睛。',
                content: [{ text: '夜间模式', Switch: 'switchnm', swiKey: 'nightmode' }]
            },
            {
                tag: 'list',
                foot: '亮度数据为百分比',
                content: [
                    { text: '设定时间', Switch: 'switchnmAC', swiKey: 'nightmodeAutoChange' },
                    { text: '开始时间', inlay: true, key: 'nightmodeStartTime', pickerValue: time },
                    { text: '结束时间', inlay: true, key: 'nightmodeEndTime', pickerValue: time },
                    { text: '日间亮度调整开关', Switch: 'dayBrightnessSwitchHandler', swiKey: 'dayBrightnessChange' },
                    { text: '日间模式亮度', slider: 'dayBrightnessHandler', min: 0, max: 100, sliKey: 'dayBrightness' },
                    { text: '夜间亮度调整开关', Switch: 'nightBrightnessSwitchHandler', swiKey: 'nightBrightnessChange' },
                    { text: '夜间模式亮度', slider: 'nightBrightnessHandler', min: 0, max: 100, sliKey: 'nightBrightness' }
                ]
            },
            {
                tag: 'list', head: '资源更新',
                content: [
                    { text: '功能资源更新提示', swiKey: 'functionResNotify' },
                    { text: '指南资源更新提示', swiKey: 'pageResNotify' }
                ]
            },
            {
                tag: 'list', head: '如果页面显示出现问题请刷新资源',
                content: [
                    { text: '刷新功能资源', button: 'refreshFunc' },
                    { text: '刷新指南资源', button: 'refreshGuide' }
                ]
            },
            { tag: 'foot' }
        ]
    },
    onNavigate: function (res) {
        for (var i = 0; i <= 23; i++)
            time[0].push(i + "\u65F6");
        for (var i = 0; i <= 59; i++)
            if (i < 10)
                time[1].push("0" + i + "\u5206");
            else
                time[1].push(i + "\u5206");
        var list = this.data.page[3].content;
        var nightmodeAutoChange = wx.getStorageSync('nightmodeAutoChange');
        var dayBrightnessChange = wx.getStorageSync('dayBrightnessChange');
        var nightBrightnessChange = wx.getStorageSync('nightBrightnessChange');
        if (!nightmodeAutoChange) {
            list[1].hidden = true;
            list[2].hidden = true;
        }
        if (a.nm)
            list[3].hidden = true;
        else
            list[5].hidden = true;
        if (!dayBrightnessChange || a.nm)
            list[4].hidden = true;
        if (!nightBrightnessChange || !a.nm)
            list[6].hidden = true;
        setpage_1.default.resolve(res, this.data.page);
    },
    onLoad: function (option) {
        if (a.page.aim === option.aim)
            setpage_1.default.Set({ option: option, ctx: this });
        else {
            var list = this.data.page[3].content;
            var nightmodeAutoChange = wx.getStorageSync('nightmodeAutoChange');
            var dayBrightnessChange = wx.getStorageSync('dayBrightnessChange');
            var nightBrightnessChange = wx.getStorageSync('nightBrightnessChange');
            if (!nightmodeAutoChange) {
                list[1].hidden = true;
                list[2].hidden = true;
            }
            if (a.nm)
                list[3].hidden = true;
            else
                list[5].hidden = true;
            if (!dayBrightnessChange || a.nm)
                list[4].hidden = true;
            if (!nightBrightnessChange || !a.nm)
                list[6].hidden = true;
            setpage_1.default.Set({ option: option, ctx: this }, this.data.page);
        }
        setpage_1.default.Notice('theme');
    },
    onShow: function () {
        var _a = setpage_1.default.color(this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
        wx.setNavigationBarColor(nc);
        wx.setBackgroundColor(bc);
    },
    onPageScroll: function (e) {
        component_1.default.nav(e, this);
    },
    cA: function (e) {
        component_1.default.trigger(e, this);
    },
    onUnload: function () {
        a.nm = app_1.nightmode();
    },
    setTheme: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function (type) {
            if (type === 'change') {
                var theme = _this.data.page[1].content[0].pickerValue[e.detail.value];
                a.T = theme;
                wx.setStorageSync('theme', theme);
                setpage_1.default.Set({ option: { aim: 'settings' }, ctx: _this }, _this.data.page);
                _this.$emit('theme', theme);
                console.log("theme\u5207\u6362\u4E3A" + theme);
            }
        });
    },
    switchnm: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            var value = e.detail.value;
            list[0].status = false;
            list[1].hidden = list[2].hidden = true;
            list[1].visible = list[2].visible = false;
            if (value) {
                list[3].hidden = list[4].hidden = true;
                list[4].visible = list[5].hidden = false;
                if (list[5].status) {
                    list[6].hidden = false;
                    wx.setScreenBrightness({ value: list[6].value / 100 });
                }
                else {
                    list[6].hidden = true;
                    list[6].visible = false;
                }
            }
            else {
                list[5].hidden = list[6].hidden = true;
                list[6].visible = list[3].hidden = false;
                if (list[3].status) {
                    list[4].hidden = false;
                    wx.setScreenBrightness({ value: list[4].value / 100 });
                }
                else {
                    list[4].hidden = true;
                    list[4].visible = false;
                }
            }
            wx.setStorageSync('nightmodeAutoChange', false);
            _this.setData({ nm: value, page: page });
            a.nm = value;
            _this.$emit('nightmode', value);
            var _a = value ? ['#ffffff', '#000000'] : ['#000000', '#ffffff'], frontColor = _a[0], backgroundColor = _a[1];
            wx.setNavigationBarColor({ frontColor: frontColor, backgroundColor: backgroundColor });
        });
    },
    switchnmAC: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            var nm = app_1.nightmode();
            page[2].content[0].status = nm;
            wx.setStorageSync('nightmode', nm);
            if (nm && list[5].status)
                wx.setScreenBrightness({ value: list[6].value / 100 });
            else if (!nm && list[3].status)
                wx.setScreenBrightness({ value: list[4].value / 100 });
            if (e.detail.value) {
                list[1].hidden = false;
                list[2].hidden = false;
            }
            else {
                list[1].hidden = list[2].hidden = true;
                list[1].visible = list[2].visible = false;
            }
            if (nm) {
                list[3].hidden = list[4].hidden = true;
                list[4].visible = list[5].hidden = false;
                list[6].hidden = !list[5].status;
            }
            else {
                list[3].hidden = list[6].visible = false;
                list[5].hidden = list[6].hidden = true;
                list[4].hidden = !list[3].status;
            }
            _this.setData({ nm: nm, page: page });
            a.nm = nm;
            _this.$emit('nightmode', nm);
            var _a = setpage_1.default.color(_this.data.page[0].grey), nc = _a.nc, bc = _a.bc;
            wx.setNavigationBarColor(nc);
            wx.setBackgroundColor(bc);
        });
    },
    dayBrightnessSwitchHandler: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            list[4].visible = e.detail.value;
            list[4].hidden = !e.detail.value;
            _this.setData({ page: page });
        });
    },
    nightBrightnessSwitchHandler: function (e) {
        var _this = this;
        component_1.default.trigger(e, this, function () {
            var page = _this.data.page;
            var list = page[3].content;
            list[6].visible = e.detail.value;
            list[6].hidden = !e.detail.value;
            _this.setData({ page: page });
        });
    },
    dayBrightnessHandler: function (e) {
        component_1.default.trigger(e, this);
        if (!a.nm && this.data.page[3].content[3].status)
            wx.setScreenBrightness({ value: e.detail.value / 100 });
    },
    nightBrightnessHandler: function (e) {
        component_1.default.trigger(e, this);
        if (a.nm && this.data.page[3].content[5].status)
            wx.setScreenBrightness({ value: e.detail.value / 100 });
    },
    refreshGuide: function () {
        tab_1.default.resDownload('page');
    },
    refreshFunc: function () {
        tab_1.default.resDownload('function');
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNldHRpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxpQ0FBMkM7QUFDM0MsZ0RBQTRDO0FBQzVDLDRDQUFxQztBQUNyQyxvQ0FBZ0M7QUFDaEMsb0NBQXlDO0FBQ2pDLElBQUEsdUJBQWEsQ0FBYztBQUduQyxJQUFNLElBQUksR0FBZSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVsQyxnQkFBUyxDQUFDLFNBQVMsRUFBRTtJQUNuQixJQUFJLEVBQUU7UUFDSixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDTixFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDUixJQUFJLEVBQUU7WUFDSixFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO1lBQ3hDO2dCQUNFLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsZUFBZTtnQkFDaEQsT0FBTyxFQUFFO29CQUNQO3dCQUNFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsVUFBVTtxQkFFakc7aUJBQ0Y7YUFDRjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxNQUFNO2dCQUNYLElBQUksRUFBRSxNQUFNO2dCQUNaLElBQUksRUFBRSxxQ0FBcUM7Z0JBQzNDLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsQ0FBQzthQUNyRTtZQUNEO2dCQUNFLEdBQUcsRUFBRSxNQUFNO2dCQUNYLElBQUksRUFBRSxVQUFVO2dCQUNoQixPQUFPLEVBQUU7b0JBQ1AsRUFBRSxJQUFJ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LENBQU07UUFDM0IsbUJBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUFFLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFDRCxZQUFZO1FBQ1YsYUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBQ0QsV0FBVztRQUNULGFBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDL0IsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCB3eCBnZXRBcHAqL1xuaW1wb3J0ICRyZWdpc3RlciwgeyBXWFBhZ2UgfSBmcm9tICd3eHBhZ2UnO1xuaW1wb3J0ICRjb21wb25lbnQgZnJvbSAnLi4vdXRpbHMvY29tcG9uZW50JztcbmltcG9ydCAkcGFnZSBmcm9tICcuLi91dGlscy9zZXRwYWdlJztcbmltcG9ydCAkdGFiIGZyb20gJy4uL3V0aWxzL3RhYic7XG5pbXBvcnQgeyBuaWdodG1vZGUgfSBmcm9tICcuLi91dGlscy9hcHAnO1xuY29uc3QgeyBnbG9iYWxEYXRhOiBhIH0gPSBnZXRBcHAoKTtcblxuLy8g55Sf5oiQ5pe26Ze0XG5jb25zdCB0aW1lOiBzdHJpbmdbXVtdID0gW1tdLCBbXV07XG5cbiRyZWdpc3Rlcignc2V0dGluZycsIHtcbiAgZGF0YToge1xuICAgIFQ6IGEuVCxcbiAgICBubTogYS5ubSxcbiAgICBwYWdlOiBbXG4gICAgICB7IHRhZzogJ2hlYWQnLCB0aXRsZTogJ+iuvue9ricsIGdyZXk6IHRydWUgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnbGlzdCcsIGhlYWQ6ICfkuLvpopjorr7nva4nLCBmb290OiAn55uu5YmNaU9T5Li76aKY5Y+v5Lul5a6M576O5pi+56S6JyxcbiAgICAgICAgY29udGVudDogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRleHQ6ICfkuLvpopjorr7nva4nLCBrZXk6ICd0aGVtZU51bScsIHNpbmdsZTogdHJ1ZSwgcGlja2VyVmFsdWU6IFsnaU9TJywgJ0FuZHJvaWQnXSwgcGlja2VyOiAnc2V0VGhlbWUnXG4gICAgICAgICAgICAvLyBQaWNrZXJWYWx1ZTogW1wiaU9TXCIsIFwiQW5kcm9pZFwiLCBcIk5FTlVcIl0sXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWc6ICdsaXN0JyxcbiAgICAgICAgaGVhZDogJ+WknOmXtOaooeW8jycsXG4gICAgICAgIGZvb3Q6ICflkK/nlKjlkI7vvIzlsIbph4fnlKjmmpfoibLog4zmma/kuI7kuq7oibLmloflrZfvvIzlnKjkv53mjIHmmpflhYnkuIvmmL7npLrmlYjmnpznmoTlkIzml7bkv53miqTnnLznnZvjgIInLFxuICAgICAgICBjb250ZW50OiBbeyB0ZXh0OiAn5aSc6Ze05qih5byPJywgU3dpdGNoOiAnc3dpdGNobm0nLCBzd2lLZXk6ICduaWdodG1vZGUnIH1dXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWc6ICdsaXN0JyxcbiAgICAgICAgZm9vdDogJ+S6ruW6puaVsOaNruS4uueZvuWIhuavlCcsXG4gICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICB7IHRleHQ6ICforr7lrprml7bpl7QnLCBTd2l0Y2g6ICdzd2l0Y2hubUFDJywgc3dpS2V5OiAnbmlnaHRtb2RlQXV0b0NoYW5nZScgfSxcbiAgICAgICAgICB7IHRleHQ6ICflvIDlp4vml7bpl7QnLCBpbmxheTogdHJ1ZSwga2V5OiAnbmlnaHRtb2RlU3RhcnRUaW1lJywgcGlja2VyVmFsdWU6IHRpbWUgfSxcbiAgICAgICAgICB7IHRleHQ6ICfnu5PmnZ/ml7bpl7QnLCBpbmxheTogdHJ1ZSwga2V5OiAnbmlnaHRtb2RlRW5kVGltZScsIHBpY2tlclZhbHVlOiB0aW1lIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn5pel6Ze05Lqu5bqm6LCD5pW05byA5YWzJywgU3dpdGNoOiAnZGF5QnJpZ2h0bmVzc1N3aXRjaEhhbmRsZXInLCBzd2lLZXk6ICdkYXlCcmlnaHRuZXNzQ2hhbmdlJyB9LFxuICAgICAgICAgIHsgdGV4dDogJ+aXpemXtOaooeW8j+S6ruW6picsIHNsaWRlcjogJ2RheUJyaWdodG5lc3NIYW5kbGVyJywgbWluOiAwLCBtYXg6IDEwMCwgc2xpS2V5OiAnZGF5QnJpZ2h0bmVzcycgfSxcbiAgICAgICAgICB7IHRleHQ6ICflpJzpl7Tkuq7luqbosIPmlbTlvIDlhbMnLCBTd2l0Y2g6ICduaWdodEJyaWdodG5lc3NTd2l0Y2hIYW5kbGVyJywgc3dpS2V5OiAnbmlnaHRCcmlnaHRuZXNzQ2hhbmdlJyB9LFxuICAgICAgICAgIHsgdGV4dDogJ+WknOmXtOaooeW8j+S6ruW6picsIHNsaWRlcjogJ25pZ2h0QnJpZ2h0bmVzc0hhbmRsZXInLCBtaW46IDAsIG1heDogMTAwLCBzbGlLZXk6ICduaWdodEJyaWdodG5lc3MnIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnbGlzdCcsIGhlYWQ6ICfotYTmupDmm7TmlrAnLFxuICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgeyB0ZXh0OiAn5Yqf6IO96LWE5rqQ5pu05paw5o+Q56S6Jywgc3dpS2V5OiAnZnVuY3Rpb25SZXNOb3RpZnknIH0sXG4gICAgICAgICAgeyB0ZXh0OiAn5oyH5Y2X6LWE5rqQ5pu05paw5o+Q56S6Jywgc3dpS2V5OiAncGFnZVJlc05vdGlmeScgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWc6ICdsaXN0JywgaGVhZDogJ+WmguaenOmhtemdouaYvuekuuWHuueOsOmXrumimOivt+WIt+aWsOi1hOa6kCcsXG4gICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICB7IHRleHQ6ICfliLfmlrDlip/og73otYTmupAnLCBidXR0b246ICdyZWZyZXNoRnVuYycgfSxcbiAgICAgICAgICB7IHRleHQ6ICfliLfmlrDmjIfljZfotYTmupAnLCBidXR0b246ICdyZWZyZXNoR3VpZGUnIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHsgdGFnOiAnZm9vdCcgfVxuICAgIF1cbiAgfSxcbiAgb25OYXZpZ2F0ZShyZXM6IFdYUGFnZS5QYWdlT3B0aW9uKSB7XG4gICAgLy8g55Sf5oiQ5pe26Ze0XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMjM7IGkrKykgdGltZVswXS5wdXNoKGAke2l95pe2YCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gNTk7IGkrKylcbiAgICAgIGlmIChpIDwgMTApIHRpbWVbMV0ucHVzaChgMCR7aX3liIZgKTtcbiAgICAgIGVsc2UgdGltZVsxXS5wdXNoKGAke2l95YiGYCk7XG5cbiAgICAvLyDor7vlj5bnirbmgIHmlbDmja7lubbmiafooYzpooTliqDovb1cbiAgICBjb25zdCBsaXN0ID0gdGhpcy5kYXRhLnBhZ2VbM10uY29udGVudDtcbiAgICBjb25zdCBuaWdodG1vZGVBdXRvQ2hhbmdlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ25pZ2h0bW9kZUF1dG9DaGFuZ2UnKTtcbiAgICBjb25zdCBkYXlCcmlnaHRuZXNzQ2hhbmdlID0gd3guZ2V0U3RvcmFnZVN5bmMoJ2RheUJyaWdodG5lc3NDaGFuZ2UnKTtcbiAgICBjb25zdCBuaWdodEJyaWdodG5lc3NDaGFuZ2UgPSB3eC5nZXRTdG9yYWdlU3luYygnbmlnaHRCcmlnaHRuZXNzQ2hhbmdlJyk7XG5cbiAgICBpZiAoIW5pZ2h0bW9kZUF1dG9DaGFuZ2UpIHtcbiAgICAgIGxpc3RbMV0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGxpc3RbMl0uaGlkZGVuID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGEubm0pIGxpc3RbM10uaGlkZGVuID0gdHJ1ZTtcbiAgICBlbHNlIGxpc3RbNV0uaGlkZGVuID0gdHJ1ZTtcbiAgICBpZiAoIWRheUJyaWdodG5lc3NDaGFuZ2UgfHwgYS5ubSkgbGlzdFs0XS5oaWRkZW4gPSB0cnVlO1xuICAgIGlmICghbmlnaHRCcmlnaHRuZXNzQ2hhbmdlIHx8ICFhLm5tKSBsaXN0WzZdLmhpZGRlbiA9IHRydWU7XG5cbiAgICAkcGFnZS5yZXNvbHZlKHJlcywgdGhpcy5kYXRhLnBhZ2UpO1xuICB9LFxuICBvbkxvYWQob3B0aW9uOiBhbnkpIHtcbiAgICBpZiAoYS5wYWdlLmFpbSA9PT0gb3B0aW9uLmFpbSkgJHBhZ2UuU2V0KHsgb3B0aW9uLCBjdHg6IHRoaXMgfSk7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBsaXN0ID0gdGhpcy5kYXRhLnBhZ2VbM10uY29udGVudDtcbiAgICAgIGNvbnN0IG5pZ2h0bW9kZUF1dG9DaGFuZ2UgPSB3eC5nZXRTdG9yYWdlU3luYygnbmlnaHRtb2RlQXV0b0NoYW5nZScpO1xuICAgICAgY29uc3QgZGF5QnJpZ2h0bmVzc0NoYW5nZSA9IHd4LmdldFN0b3JhZ2VTeW5jKCdkYXlCcmlnaHRuZXNzQ2hhbmdlJyk7XG4gICAgICBjb25zdCBuaWdodEJyaWdodG5lc3NDaGFuZ2UgPSB3eC5nZXRTdG9yYWdlU3luYygnbmlnaHRCcmlnaHRuZXNzQ2hhbmdlJyk7XG5cbiAgICAgIGlmICghbmlnaHRtb2RlQXV0b0NoYW5nZSkge1xuICAgICAgICBsaXN0WzFdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIGxpc3RbMl0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChhLm5tKSBsaXN0WzNdLmhpZGRlbiA9IHRydWU7XG4gICAgICBlbHNlIGxpc3RbNV0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGlmICghZGF5QnJpZ2h0bmVzc0NoYW5nZSB8fCBhLm5tKSBsaXN0WzRdLmhpZGRlbiA9IHRydWU7XG4gICAgICBpZiAoIW5pZ2h0QnJpZ2h0bmVzc0NoYW5nZSB8fCAhYS5ubSkgbGlzdFs2XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgJHBhZ2UuU2V0KHsgb3B0aW9uLCBjdHg6IHRoaXMgfSwgdGhpcy5kYXRhLnBhZ2UpO1xuICAgIH1cbiAgICAkcGFnZS5Ob3RpY2UoJ3RoZW1lJyk7XG4gIH0sXG4gIG9uU2hvdygpIHtcbiAgICAvLyDorr7nva7og7blm4rlkozog4zmma/popzoibJcbiAgICBjb25zdCB7IG5jLCBiYyB9ID0gJHBhZ2UuY29sb3IodGhpcy5kYXRhLnBhZ2VbMF0uZ3JleSk7XG5cbiAgICB3eC5zZXROYXZpZ2F0aW9uQmFyQ29sb3IobmMpO1xuICAgIHd4LnNldEJhY2tncm91bmRDb2xvcihiYyk7XG4gIH0sXG4gIG9uUGFnZVNjcm9sbChlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50Lm5hdihlLCB0aGlzKTtcbiAgfSxcbiAgY0EoZTogYW55KSB7XG4gICAgJGNvbXBvbmVudC50cmlnZ2VyKGUsIHRoaXMpO1xuICB9LFxuICBvblVubG9hZCgpIHtcbiAgICBhLm5tID0gbmlnaHRtb2RlKCk7XG4gIH0sXG4gIHNldFRoZW1lKGU6IGFueSkge1xuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzLCB0eXBlID0+IHtcbiAgICAgIGlmICh0eXBlID09PSAnY2hhbmdlJykge1xuICAgICAgICBjb25zdCB0aGVtZSA9IHRoaXMuZGF0YS5wYWdlWzFdLmNvbnRlbnRbMF0ucGlja2VyVmFsdWVbZS5kZXRhaWwudmFsdWVdO1xuXG4gICAgICAgIGEuVCA9IHRoZW1lO1xuICAgICAgICB3eC5zZXRTdG9yYWdlU3luYygndGhlbWUnLCB0aGVtZSk7XG4gICAgICAgICRwYWdlLlNldCh7IG9wdGlvbjogeyBhaW06ICdzZXR0aW5ncycgfSwgY3R4OiB0aGlzIH0sIHRoaXMuZGF0YS5wYWdlKTtcbiAgICAgICAgdGhpcy4kZW1pdCgndGhlbWUnLCB0aGVtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGB0aGVtZeWIh+aNouS4uiR7dGhlbWV9YCk7IC8vIOiwg+ivlVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzd2l0Y2hubShlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwYWdlIH0gPSB0aGlzLmRhdGE7XG4gICAgICBjb25zdCBsaXN0ID0gcGFnZVszXS5jb250ZW50O1xuICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gZS5kZXRhaWw7XG5cbiAgICAgIGxpc3RbMF0uc3RhdHVzID0gZmFsc2U7XG4gICAgICBsaXN0WzFdLmhpZGRlbiA9IGxpc3RbMl0uaGlkZGVuID0gdHJ1ZTtcbiAgICAgIGxpc3RbMV0udmlzaWJsZSA9IGxpc3RbMl0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIGxpc3RbM10uaGlkZGVuID0gbGlzdFs0XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzRdLnZpc2libGUgPSBsaXN0WzVdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBpZiAobGlzdFs1XS5zdGF0dXMpIHtcbiAgICAgICAgICBsaXN0WzZdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogbGlzdFs2XS52YWx1ZSAvIDEwMCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0WzZdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgbGlzdFs2XS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RbNV0uaGlkZGVuID0gbGlzdFs2XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzZdLnZpc2libGUgPSBsaXN0WzNdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBpZiAobGlzdFszXS5zdGF0dXMpIHtcbiAgICAgICAgICBsaXN0WzRdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogbGlzdFs0XS52YWx1ZSAvIDEwMCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0WzRdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgbGlzdFs0XS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCduaWdodG1vZGVBdXRvQ2hhbmdlJywgZmFsc2UpO1xuICAgICAgdGhpcy5zZXREYXRhISh7IG5tOiB2YWx1ZSwgcGFnZSB9KTtcbiAgICAgIGEubm0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuJGVtaXQoJ25pZ2h0bW9kZScsIHZhbHVlKTtcbiAgICAgIGNvbnN0IFtmcm9udENvbG9yLCBiYWNrZ3JvdW5kQ29sb3JdID0gdmFsdWUgPyBbJyNmZmZmZmYnLCAnIzAwMDAwMCddIDogWycjMDAwMDAwJywgJyNmZmZmZmYnXTtcblxuICAgICAgd3guc2V0TmF2aWdhdGlvbkJhckNvbG9yKHsgZnJvbnRDb2xvciwgYmFja2dyb3VuZENvbG9yIH0pO1xuICAgIH0pO1xuICB9LFxuICBzd2l0Y2hubUFDKGU6IGFueSkge1xuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHBhZ2UgfSA9IHRoaXMuZGF0YTtcbiAgICAgIGNvbnN0IGxpc3QgPSBwYWdlWzNdLmNvbnRlbnQ7XG4gICAgICBjb25zdCBubSA9IG5pZ2h0bW9kZSgpO1xuXG4gICAgICBwYWdlWzJdLmNvbnRlbnRbMF0uc3RhdHVzID0gbm07XG4gICAgICB3eC5zZXRTdG9yYWdlU3luYygnbmlnaHRtb2RlJywgbm0pO1xuICAgICAgaWYgKG5tICYmIGxpc3RbNV0uc3RhdHVzKSB3eC5zZXRTY3JlZW5CcmlnaHRuZXNzKHsgdmFsdWU6IGxpc3RbNl0udmFsdWUgLyAxMDAgfSk7XG4gICAgICBlbHNlIGlmICghbm0gJiYgbGlzdFszXS5zdGF0dXMpIHd4LnNldFNjcmVlbkJyaWdodG5lc3MoeyB2YWx1ZTogbGlzdFs0XS52YWx1ZSAvIDEwMCB9KTtcbiAgICAgIGlmIChlLmRldGFpbC52YWx1ZSkge1xuICAgICAgICBsaXN0WzFdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBsaXN0WzJdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlzdFsxXS5oaWRkZW4gPSBsaXN0WzJdLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIGxpc3RbMV0udmlzaWJsZSA9IGxpc3RbMl0udmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG5tKSB7XG4gICAgICAgIGxpc3RbM10uaGlkZGVuID0gbGlzdFs0XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzRdLnZpc2libGUgPSBsaXN0WzVdLmhpZGRlbiA9IGZhbHNlO1xuICAgICAgICBsaXN0WzZdLmhpZGRlbiA9ICFsaXN0WzVdLnN0YXR1cztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RbM10uaGlkZGVuID0gbGlzdFs2XS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIGxpc3RbNV0uaGlkZGVuID0gbGlzdFs2XS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICBsaXN0WzRdLmhpZGRlbiA9ICFsaXN0WzNdLnN0YXR1cztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0RGF0YSEoeyBubSwgcGFnZSB9KTtcbiAgICAgIGEubm0gPSBubTtcbiAgICAgIHRoaXMuJGVtaXQoJ25pZ2h0bW9kZScsIG5tKTtcblxuICAgICAgLy8g6K6+572u6IO25ZuK5ZKM6IOM5pmv6aKc6ImyXG4gICAgICBjb25zdCB7IG5jLCBiYyB9ID0gJHBhZ2UuY29sb3IodGhpcy5kYXRhLnBhZ2VbMF0uZ3JleSk7XG5cbiAgICAgIHd4LnNldE5hdmlnYXRpb25CYXJDb2xvcihuYyk7XG4gICAgICB3eC5zZXRCYWNrZ3JvdW5kQ29sb3IoYmMpO1xuICAgIH0pO1xuICB9LFxuICBkYXlCcmlnaHRuZXNzU3dpdGNoSGFuZGxlcihlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcywgKCkgPT4ge1xuICAgICAgY29uc3QgeyBwYWdlIH0gPSB0aGlzLmRhdGE7XG4gICAgICBjb25zdCBsaXN0ID0gcGFnZVszXS5jb250ZW50O1xuXG4gICAgICBsaXN0WzRdLnZpc2libGUgPSBlLmRldGFpbC52YWx1ZTtcbiAgICAgIGxpc3RbNF0uaGlkZGVuID0gIWUuZGV0YWlsLnZhbHVlO1xuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2UgfSk7XG4gICAgfSk7XG4gIH0sXG4gIG5pZ2h0QnJpZ2h0bmVzc1N3aXRjaEhhbmRsZXIoZTogYW55KSB7XG4gICAgJGNvbXBvbmVudC50cmlnZ2VyKGUsIHRoaXMsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcGFnZSB9ID0gdGhpcy5kYXRhO1xuICAgICAgY29uc3QgbGlzdCA9IHBhZ2VbM10uY29udGVudDtcblxuICAgICAgbGlzdFs2XS52aXNpYmxlID0gZS5kZXRhaWwudmFsdWU7XG4gICAgICBsaXN0WzZdLmhpZGRlbiA9ICFlLmRldGFpbC52YWx1ZTtcbiAgICAgIHRoaXMuc2V0RGF0YSEoeyBwYWdlIH0pO1xuICAgIH0pO1xuICB9LFxuICBkYXlCcmlnaHRuZXNzSGFuZGxlcihlOiBhbnkpIHtcbiAgICAkY29tcG9uZW50LnRyaWdnZXIoZSwgdGhpcyk7XG4gICAgaWYgKCFhLm5tICYmIHRoaXMuZGF0YS5wYWdlWzNdLmNvbnRlbnRbM10uc3RhdHVzKSB3eC5zZXRTY3JlZW5CcmlnaHRuZXNzKHsgdmFsdWU6IGUuZGV0YWlsLnZhbHVlIC8gMTAwIH0pO1xuICB9LFxuICBuaWdodEJyaWdodG5lc3NIYW5kbGVyKGU6IGFueSkge1xuICAgICRjb21wb25lbnQudHJpZ2dlcihlLCB0aGlzKTtcbiAgICBpZiAoYS5ubSAmJiB0aGlzLmRhdGEucGFnZVszXS5jb250ZW50WzVdLnN0YXR1cykgd3guc2V0U2NyZWVuQnJpZ2h0bmVzcyh7IHZhbHVlOiBlLmRldGFpbC52YWx1ZSAvIDEwMCB9KTtcbiAgfSxcbiAgcmVmcmVzaEd1aWRlKCkge1xuICAgICR0YWIucmVzRG93bmxvYWQoJ3BhZ2UnKTtcbiAgfSxcbiAgcmVmcmVzaEZ1bmMoKSB7XG4gICAgJHRhYi5yZXNEb3dubG9hZCgnZnVuY3Rpb24nKTtcbiAgfVxufSk7XG4iXX0=